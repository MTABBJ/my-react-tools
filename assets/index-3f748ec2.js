import{j as ze,r,C as Ft,z as Dt,t as ie,u as mt,a as ue,b as oe,m as j,d as Ot,S as ht,n as pt,c as z,B as N,e as gt,R as J,f as ye,g as Ce,h as xe,L as He,H as Ht,i as Ut,k as Vt,T as qe,l as Ee,o as Bt,F as ft,p as yt,q as zt,s as H,G as qt,v as O,w as jt,x as Yt,y as pe,A as je,U as bt,D as Z,E as Ue,P as Kt,I as Gt,J as w,K as ge,M as Wt,N as F,O as be,Q as Jt,V as Xt,W as Qt,X as _t,Y as Zt,Z as ea,_ as ta,$ as aa,a0 as A,a1 as Y,a2 as Ie,a3 as wt,a4 as na,a5 as Ae,a6 as oa,a7 as Ye,a8 as Qe,a9 as Ke,aa as sa,ab as Ge,ac as we,ad as ca,ae as ra,af as Ze,ag as et,ah as la,ai as da,aj as ia,ak as ua,al as ve,am as tt,an as ma,ao as ha,ap as x,aq as k,ar as C,as as q,at as me,au as pa,av as ga,aw as fa,ax as ya,ay as at,az as ba,aA as _a,aB as wa,aC as va,aD as Ca,aE as ka,aF as xa,aG as vt,aH as Ct,aI as We,aJ as Sa,aK as Ta,aL as Ea,aM as Na,aN as R,aO as K,aP as nt,aQ as Ra}from"./vendor-130bbd52.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(s){if(s.ep)return;s.ep=!0;const c=o(s);fetch(s.href,c)}})();const U=ze.Fragment,e=ze.jsx,y=ze.jsxs,ee={pageTitle:"后台管理系统模板",pageTitlePrefix:"后台管理",tokenKey:"Authorization",apiBaseUrl:"https://xstnet.github.io/my-react-tools/api",iconFontUrl:"//at.alicdn.com/t/c/font_4623264_knfkd148feq.js"};function Ma(t,a){localStorage.setItem(t,typeof a=="object"?JSON.stringify(a):a)}function Ia(t){localStorage.setItem(ee.tokenKey,typeof t=="object"?JSON.stringify(t):t)}function kt(t){return localStorage.getItem(t)}function Aa(t){const a=localStorage.getItem(t);if(a!==null)return Number(a)}function Pa(t){const a=localStorage.getItem(t);if(a!==null)return a==="true"}function La(t){const a=localStorage.getItem(t);if(a!==null)return JSON.parse(a)}function $a(t){return kt(t)!==null}function Fa(t){localStorage.removeItem(t)}function Da(){localStorage.removeItem(ee.tokenKey)}function Oa(){localStorage.clear()}const W={set:Ma,setToken:Ia,has:$a,getString:kt,getObject:La,getBoolean:Pa,getNumber:Aa,remove:Fa,removeToken:Da,clear:Oa},xt=()=>{const[t,a]=r.useState(window.matchMedia("(prefers-color-scheme: dark)").matches);return r.useEffect(()=>{const n=s=>{console.log("chage",s.matches),s.matches?a(!0):a(!1)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",n),()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",n)}},[]),[t?"dark":"light"]},Ha=void 0,Ua=r.createContext(Ha),Va=({children:t})=>{const{settings:{primaryColor:a,theme:o,compactMode:n,followSystemTheme:s}}=r.useContext(ae),[c]=xt(),l={},u=()=>{const h=[];return s?h.push(c==="light"?ie.defaultAlgorithm:ie.darkAlgorithm):h.push(o==="light"?ie.defaultAlgorithm:ie.darkAlgorithm),n&&h.push(ie.compactAlgorithm),h};return e(Ua.Provider,{value:l,children:e(Ft,{locale:Dt,theme:{algorithm:u(),token:{colorPrimary:a},components:{Button:{borderRadius:4,borderRadiusSM:2},Modal:{borderRadius:4,borderRadiusOuter:2}}},children:t})})},Ba=void 0,ae=r.createContext(Ba),za=({children:t})=>{const a=r.useMemo(()=>({theme:"light",compactMode:!1,followSystemTheme:!1,fixedHeader:!0,fixedMenu:!0,showFooter:!0,multitabMode:!1,primaryColor:"#ee519c",...W.getObject("settings")||{}}),[]),[o,n]=r.useState(a),s=r.useCallback(l=>{const u={...o,...l};n(u),W.set("settings",u)},[o]),c={settings:o,setSetting:s};return e(ae.Provider,{value:c,children:e(Va,{children:t})})},qa=void 0,se=r.createContext(qa),ja=({children:t})=>{const[a,o]=r.useState(!1),[n,{toggleFullscreen:s}]=mt(document.body),[c,l]=r.useState(null),u=r.useMemo(()=>({isLogin:a,setIsLogin:o,userInfo:c,setUserInfo:l,fullScreen:n,setFullScreen:s}),[a,c,n]);return e(se.Provider,{value:u,children:e(za,{children:t})})},Ya="modulepreload",Ka=function(t){return"/my-react-tools/"+t},ot={},ke=function(a,o,n){if(!o||o.length===0)return a();const s=document.getElementsByTagName("link");return Promise.all(o.map(c=>{if(c=Ka(c),c in ot)return;ot[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!n)for(let d=s.length-1;d>=0;d--){const b=s[d];if(b.href===c&&(!l||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=l?"stylesheet":Ya,l||(m.as="script",m.crossOrigin=""),m.href=c,document.head.appendChild(m),l)return new Promise((d,b)=>{m.addEventListener("load",d),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>a())},Ga=({to:t})=>{const a=ue();return r.useEffect(()=>{a(t)},[]),null};var Ve=(t=>(t[t.success=0]="success",t[t.noLogin=-10001]="noLogin",t[t.loginExpired=-10002]="loginExpired",t))(Ve||{}),St=(t=>(t[t.male=1]="male",t[t.female=2]="female",t))(St||{}),_e=(t=>(t[t.incomplete=1]="incomplete",t[t.completed=2]="completed",t[t.deleted=10]="deleted",t))(_e||{}),Wa=(t=>(t.day="YYYY-MM-DD",t.second="YYYY-MM-DD HH:mm:ss",t.minute="YYYY-MM-DD HH:mm",t.hour="YYYY-MM-DD HH",t))(Wa||{});function ne(){}function st(t,a){return Math.floor(Math.random()*(a-t+1))+t}function Tt(t,a){const{roles:o=[]}=a||{};return t?typeof t=="string"||typeof t=="number"?o.includes(t):Array.isArray(t)?t.some(n=>o.includes(n)):typeof t=="function"?t(a):!1:!0}function Ja(t,a){let o;return function(...n){clearTimeout(o),o=setTimeout(()=>{t(...n)},a)}}function Xa(t){var o;const{config:a}=t;console.group(`${(o=a.method)==null?void 0:o.toLocaleUpperCase()} ${a.url}`),console.log("Path:",a.url),console.log("Method:",a.method),console.log("Params:",a.params),console.log("Body:",a.data),console.log("StatusCode:",t.status),console.log("Response:",typeof t.data=="object"?Object.assign(Object.create(null),t.data):t.data),console.groupEnd()}const Qa=10*1e3;oe.defaults.baseURL=ee.apiBaseUrl;oe.defaults.headers.post["Content-Type"]="application/json; charset=utf-8";oe.defaults.timeout=Qa;oe.interceptors.request.use(t=>(t.headers.Authorization=`Bearer ${W.getString(ee.tokenKey)}`,t),t=>Promise.reject(t));oe.interceptors.response.use(t=>{Xa(t);const a=t.data;return typeof a.code!="number"?(j.error("系统错误",2),console.warn("api调用失败, 未正常返回数据, url:",t.config.url,"data:",a,"response:",t),Promise.reject(t)):a.code===0?(t.config.method==="post"&&typeof t.data.message=="string"&&t.data.message.length>0&&j.success(t.data.message),t):a.code===Ve.noLogin?(j.error("您还没有登录, 即将跳转到登录页面, 请稍后..."),W.remove(ee.tokenKey),location.reload(),Promise.reject(a)):a.code===Ve.loginExpired?(j.error("登录已失效, 即将跳转到登录页面..."),W.remove(ee.tokenKey),location.reload(),Promise.reject(a)):(j.error(a.message),Promise.reject(t))},t=>(typeof t.message=="string"&&t.message==="Network Error"?j.error("网络错误, 请稍后再试!"):j.error("请求失败, 请稍后再试"),console.log("Request error",t),Promise.reject(t)));const Za=(t,a,o)=>{const n=o||{};return n.params=a,oe.get(t,n).then(s=>s.data.data).catch(s=>Promise.reject(s))},en=(t,a,o)=>oe.post(t,a,o).then(n=>n.data.data).catch(n=>Promise.reject(n)),tn=t=>oe.request(t),P={get:Za,post:en,request:tn},qo=t=>P.post("/login",t),an=t=>P.get("/user/info",t),nn=()=>P.post("/user/logout"),on=(t,a)=>P.get("/user/list",{...t,...a}),sn=t=>P.post("/user/create",t),cn=t=>P.post("/user/update",t),rn=t=>P.post("/user/delete",t),jo=(t,a)=>P.get("/article/list",{...t,...a}),ln=t=>P.get("/article/detail",t),dn=t=>P.post("/article/create",t),un=t=>P.post("/article/update",t),Yo=t=>P.post("/article/delete",t),Ko=t=>P.get("/todo/list",t),Go=t=>P.post("/todo/changeStatus",t),Wo=t=>P.post("/todo/delete",t),Jo=t=>P.post("/todo/update",t),Xo=t=>P.post("/todo/create",t),Je=()=>P.get("/category/treeList"),mn=t=>P.post("/category/create",t),hn=t=>P.post("/category/update",t);function pn(t){const a=t.split(".")[1];if(a)try{return JSON.parse(Ot(a))}catch(o){console.warn("Parse Token Error: ",o);return}}function ct(){var o;const t=W.getString(ee.tokenKey);if(!t)return!1;const a=pn(t);return a!==void 0&&((o=a==null?void 0:a.data)==null?void 0:o.uid)>0&&a.exp>new Date().getTime()/1e3}const Xe=({loading:t=!0,title:a="页面加载中",delay:o=50})=>{const{settings:{theme:n}}=r.useContext(ae);return e(ht,{size:"large",spinning:t,tip:a,delay:o,wrapperClassName:`page-loading-spin-${n}`,children:e("div",{style:{height:"100%",width:"100%"}})})},gn=()=>{const[t,a]=pt.useNotification(),o=W.getBoolean("dontShowCompactModeNotify"),{setSetting:n,settings:{compactMode:s}}=r.useContext(ae),c=()=>{const l=`open${Date.now()}`,u=y(z,{children:[e(N,{type:"link",size:"small",onClick:()=>t.destroy(),children:"不再提示"}),e(N,{type:"primary",size:"small",onClick:()=>{n({compactMode:!0}),t.destroy(l)},children:"开启"})]});t.info({message:"开启紧凑布局模式",description:"检测到您的屏幕尺寸过小, 是否开启紧凑布局模式? 或者您也可以选择在设置中手动开启",btn:u,key:l,onClose:()=>W.set("dontShowCompactModeNotify",!0)})};return r.useEffect(()=>{!o&&!s&&window.innerWidth<=1440&&c()},[]),a},fn=[{label:"控制台",icon:"icon-dashboard",path:"/dashboard",permission:"admin"},{label:"复刻页面",icon:"icon-link",path:"/replica",children:[{label:"市场行情",icon:"icon-link",path:"/replica/research"},{label:"导出为Word",icon:"icon-link",path:"/replica/exportWord"},{label:"加水印",icon:"icon-link",path:"/replica/watermark"},{label:"图片标注",icon:"icon-link",path:"/replica/dimension"}]},{label:"测试页面",path:"/example",icon:"icon-all",children:[{label:"列表页",icon:"icon-list",path:"/example/userList",permission:["admin","guest"]},{label:"权限测试页",icon:"icon-list",path:"/example/permission",children:[{label:"菜单权限",icon:"icon-list",path:"/example/permission/menu"},{label:"按钮权限",icon:"icon-list",path:"/example/permission/button"}]},{label:"多级菜单",icon:"icon-list",path:"/multilevel/menu",children:[{label:"二级菜单",icon:"icon-list",path:"/multilevel/menu/2",children:[{label:"三级菜单",icon:"icon-list",path:"/multilevel/menu/2/3"}]}]},{label:"Tabs标签页",icon:"icon-lable",path:"/example/tabs",children:[{label:"标签管理",icon:"icon-lable",path:"/example/tabs/manage"}]},{label:"空白页",icon:"icon-square",path:"/blank"},{label:"404",icon:"icon-error",path:"/404"}]},{label:"徽标示例",path:"/badge",icon:"icon-lable",children:[{label:"红点徽标",icon:"icon-lable",badge:"dot",path:"/badge/dot"},{label:"数字徽标",icon:"icon-lable",badge:98,path:"/badge/count"}]},{path:"/article",label:"文章管理",icon:"icon-suggest",permission:"admin",children:[{path:"/article/list",label:"文章列表",icon:"icon-suggest"},{path:"/article/create",label:"发布文章",hideInMenu:!0,parent:"/article/list"},{path:"/article/update",label:"更新文章",hideInMenu:!0,parent:"/article/list"},{path:"/article/category",label:"分类管理",icon:"icon-category"}]},{path:"/iframe",label:"外部页面",icon:"icon-link",permission:"admin",children:[{path:"https://ant-design.antgroup.com/components/overview-cn/",label:"antd文档(内嵌)",icon:"icon-link",type:"iframe"},{path:"https://baidu.com",label:"百度",icon:"icon-link",type:"iframe"}]},{path:"/document",label:"文档",hideInMenu:!0,icon:"icon-link",children:[{path:"/document/start",label:"开始使用",icon:"icon-link"},{path:"/document/package.json",label:"Package文件说明",icon:"icon-link"}]},{path:"/user/center",label:"个人中心",icon:"icon-customer",permission:t=>t.roles.includes("admin"),children:[{path:"/user/center/index",label:"个人中心",icon:"icon-customer"},{path:"/user/center/update",label:"修改信息",icon:"icon-suggest"}]}],yn=async t=>fn;function Et(t){return!!(typeof t.children>"u"||Array.isArray(t.children)&&t.children.length===0)}function Re(t){return Pe(t)?!1:!!(typeof t.children<"u"&&Array.isArray(t.children)&&t.children.length>0)}function Me(t){return typeof t.path=="string"&&typeof t.label=="string"}function Pe(t){return typeof t.type<"u"&&t.type==="group"}function bn(t){return typeof t.type<"u"&&t.type==="divider"}const _n=void 0,te=r.createContext(_n),wn=({children:t})=>{const{userInfo:a}=r.useContext(se),[o,n]=r.useState([]),[s,c]=r.useState(!1);r.useEffect(()=>{async function m(){try{const d=await yn(a);n([...d])}catch(d){console.warn("获取菜单数据失败",d)}}m()},[a]);const{mapPathToMenu:l,processedMenuList:u}=r.useMemo(()=>(()=>{const d=new Map,b=_=>{Me(_)&&(_.key=(_==null?void 0:_.key)||_.path);const{permission:T,...g}=_;return g},i=_=>_.map(g=>{var S;const{permission:f=void 0}=g;if(!Tt(f,a))return null;const v=b(g);return(Re(v)||Pe(v))&&(v.children=i(v.children||[]),!v.children||!((S=v.children)!=null&&S.length))?null:(Me(v)&&d.set(v.path,v),v)}).filter(g=>g);return{processedMenuList:i(o),mapPathToMenu:d}})(),[o]),h=r.useMemo(()=>({menuList:u,setMenuList:n,menuCollapsed:s,setMenuCollapsed:c,mapPathToMenu:l}),[o,s]);return o.length===0?e(te.Provider,{value:h,children:e(Xe,{})}):e(te.Provider,{value:h,children:t})},vn={addTab:ne,removeTab:ne,tabs:[],openTab:ne,hasTab:()=>!1,setTabs:ne,activeTab:"",whiteList:[],tabEvent:gt(),addTabWithNavigate:ne},Le=r.createContext(vn),Cn=({children:t})=>{const[a,o]=r.useState([]),[n,s]=r.useState(""),c=r.useMemo(()=>gt(),[]),l=ue(),u=r.useCallback(()=>{const b=g=>{g&&g!==n&&s(g)},i=g=>a.findIndex(f=>f.key===g)>-1,p=(g,f=!0)=>{i(g.key)||o(v=>[...v,{...g}]),f&&n!==g.key&&b(g.key)};return{openTab:b,addTab:p,removeTab:g=>{const f=a.findIndex(S=>S.key===g);if(f===-1)return;const v=a[f===0?1:f-1];o(S=>S.filter($=>$.key!==g)),n===g&&v&&l(v.key),console.log("tabs",a)},hasTab:i,addTabWithNavigate:g=>{p(g,!0);const f=a.find(S=>S.key===g.key)||g;if(!f){console.log("标签页不存在");return}const v=f.key+(f.queryString||"");l(v)}}},[a,n]),h=r.useMemo(()=>u(),[u]),m=["/"],d=r.useMemo(()=>({tabs:a,setTabs:o,activeTab:n,tabEvent:c,whiteList:m,...h}),[a,n]);return e(Le.Provider,{value:d,children:t})},fe=()=>{const{token:t}=ie.useToken();return t},X="/iframe",Nt=t=>`${X}?url=${t}`;const Ne=new Map,Be=t=>{t.map(a=>{Me(a)&&(a==null?void 0:a.type)==="url"||(Pe(a)&&Be(a.children||[]),(Re(a)||Et(a))&&(a.path&&Ne.set(a.path,a.label),a.children&&Be(a.children||[])))})},kn=()=>{const{menuList:t}=r.useContext(te),a=r.useMemo(()=>(Ne.clear(),Be(t),Ne),[t]),o=ye(),[n]=Ce(),s=()=>{if(o.pathname===X){const u=n.get("url");if(u&&Ne.has(u))return[e(xe.Item,{children:e(He,{style:{color:"inherit"},to:Nt(u),children:a.get(u)})},u)]}return[]},c=r.useMemo(()=>{const u=o.pathname.split("/").filter(h=>h);return u.map((h,m)=>{const d=`/${u.slice(0,m+1).join("/")}`;return a.has(d)?e(xe.Item,{children:m===u.length-1?e(He,{style:{color:"inherit"},to:d,children:a.get(d)}):a.get(d)},d):null})},[o]),l=[e(xe.Item,{children:e(Ht,{})},"home"),...c,...s()];return e(xe,{className:"breadcrumb",children:l})},Rt=J.memo(kn);function xn({freeze:t,children:a}){const o=r.useRef({}).current;if(t&&!o.promise)throw o.promise=new Promise(n=>{o.resolve=n}),o.promise;if(t)throw o.promise;return o.promise&&(o.resolve(),o.promise=void 0),e(r.Fragment,{children:a})}function Sn({freeze:t,children:a,placeholder:o=null}){return e(r.Suspense,{fallback:o,children:e(xn,{freeze:t,children:a})})}const Tn=({active:t,children:a,id:o,parentRef:n})=>{const[s]=r.useState(()=>document.createElement("div")),c=r.useRef(!0),l=o.indexOf(X)===0,u=r.useMemo(()=>Ut.createPortal(a,s),[]);return r.useEffect(()=>{const h=()=>{var d,b;if(t&&s.setAttribute("id",o),l)return m();if(t)(d=n.current)==null||d.appendChild(s);else try{(b=n.current)==null||b.removeChild(s)}catch{}},m=()=>{var d;c.current&&((d=n.current)==null||d.appendChild(s)),s.style.display=t?"block":"none",c.current=!1};h()},[t,s,c.current]),r.useEffect(()=>()=>{var h;try{(h=n.current)==null||h.removeChild(s)}catch{}},[]),l?e(Sn,{freeze:!t,children:u}):u};let rt=1;const En=()=>{const t=Vt(),{pathname:a,search:o}=ye(),n=a===X?a+o:a,{tabs:s,tabEvent:c,whiteList:l}=r.useContext(Le),u=r.useRef(null),[h,m]=r.useState([]);return r.useEffect(()=>{const d=c.on("reload",b=>{console.log("刷新页面:",b),m(h.map(i=>i.id!==b?i:{...i,key:++rt}))});return()=>{d()}},[h]),r.useEffect(()=>{if(!n||l.includes(n))return;const d=s.map(b=>b.key);m(b=>(b.find(p=>p.id===n)||b.push({id:n,element:t,key:++rt}),b.filter(p=>d.includes(p.id))))},[s]),l.includes(n)?t:y(U,{children:[e("div",{ref:u,className:"keep-alive"}),h.map(({id:d,element:b,key:i})=>e(Tn,{active:d===n,parentRef:u,id:d,children:b},i))]})};const Nn=()=>{const{pathname:t}=ye(),{tabs:a,activeTab:o,removeTab:n,tabEvent:s,addTabWithNavigate:c}=r.useContext(Le),{colorPrimary:l}=fe(),[u,h]=r.useState(!1),{colorBgLayout:m}=fe(),d=g=>{g&&g!==t&&c({key:g,label:""})},b=(g,f)=>{f==="remove"&&n(g)},i=()=>{s.emit("reload",t)},p=g=>{const f=g;h(f),s.emit("fullScreen",f)},_=()=>y(z,{size:0,children:[e(Ee,{title:"刷新当前页面",children:e(N,{onClick:i,type:"link",style:{color:l},icon:e(Bt,{})})}),(()=>u?e(Ee,{title:"退出全屏",children:e(N,{onClick:()=>p(!1),type:"link",style:{color:l},icon:e(ft,{})})}):e(Ee,{title:"全屏",children:e(N,{onClick:()=>p(!0),type:"link",style:{color:l},icon:e(yt,{})})}))()]}),T={backgroundColor:m,left:u?0:void 0};return e(qe,{className:"tabs-wrapper",type:"editable-card",hideAdd:!0,activeKey:o,items:[...a],onChange:d,onEdit:b,tabBarExtraContent:e(_,{}),style:T})};const Rn=({children:t})=>{const{pathname:a,search:o}=ye(),{addTab:n,hasTab:s,openTab:c,tabs:l,tabEvent:u,whiteList:h}=r.useContext(Le),{mapPathToMenu:m}=r.useContext(te),d=r.useRef(null),[b,{toggleFullscreen:i}]=mt(d),{colorBgLayout:p}=fe(),[_]=Ce(),T=zt(),g=v=>{var B;let S="";const $=v.split("/").filter(V=>V);for(let V=0;V<$.length;V++){const re=`/${$.slice(0,V+1).join("/")}`;m.has(re)&&(S=((B=m.get(re))==null?void 0:B.label)||S)}return S},f=()=>{if(h.includes(a))return;let v=a;a===X&&(v=_.get("url")||"");const S=m.get(v),$=S?a===X?a+o:S.key:a;if(s($)){c($);return}if(!S||!S.path){let B=g(v);if(!B)B="404",a===X&&(B="Iframe 页面");else{const{params:{id:V=void 0}}=T.pop()||{params:{id:void 0}};V&&(B+=": "+V)}n({label:B,key:$,queryString:o,children:null});return}n({label:S.label,key:$,queryString:a===X?"":o,children:null})};return r.useEffect(()=>{f()},[a,o]),r.useEffect(()=>{},[o]),r.useEffect(()=>{const v=u.on("fullScreen",S=>{i()});return()=>{v()}},[]),y(H.Content,{className:"content",ref:d,style:{backgroundColor:p},children:[l.length?e(Nn,{}):null,l.length?e(Rt,{}):null,e(En,{})]})},Mn=J.memo(Rn),Mt=()=>{const{settings:{showFooter:t}}=r.useContext(ae),{Text:a,Link:o}=O;return t?e(H.Footer,{style:{textAlign:"center",paddingBottom:4},children:y(o,{href:"https://github.com/MTABBJ",target:"_blank",style:{color:"inherit"},children:[e(qt,{}),e(a,{type:"secondary",children:" Moto "})]})}):null};const In=()=>{const{fullScreen:t,setFullScreen:a}=r.useContext(se),o=()=>{j.success(t?"已退出全屏模式":"进入全屏模式"),a(!t)};return t?e(ft,{title:"退出全屏模式",className:"action-icon",onClick:o}):e(yt,{title:"进入全屏模式",className:"action-icon",onClick:o})},An=()=>e(O.Link,{className:"action-icon",target:"_blank",style:{color:"inherit"},href:"https://github.com/MTABBJ",children:e(jt,{})}),Q=Yt({scriptUrl:ee.iconFontUrl,extraCommonProps:{}}),Pn=[[2,1,"刚刚"],[60,1,"%d秒前"],[3600,60,"%d分钟前"],[86400,3600,"%d小时前"],[86400*30,3600*24,"%d天前"],[86400*30*12,3600*24*30,"%d月前"],[1/0,3600*24*30*12,"%d年前"]],Ln=[[-60,1,"%d秒后"],[-3600,60,"%d分钟后"],[-86400,3600,"%d小时后"],[-(86400*30),3600*24,"%d天后"],[-(86400*30*12),3600*24*30,"%d月后"],[-1/0,3600*24*30*12,"%d年后"]],$n=({time:t,...a})=>{const o=Math.floor(new Date().getTime()/1e3),n=Math.floor(new Date(t).getTime()/1e3),s=o-n;if(isNaN(n))return e(U,{children:"time"});const c=s<-1?Ln:Pn;let l="";for(const[u,h,m]of c)if(Math.abs(s)<Math.abs(u)){const d=Math.floor(Math.abs(s)/h);l=m.replace("%d",String(d));break}return e(Ee,{title:t,children:e("span",{...a,children:l})})},Fn=()=>e(pe,{size:"small",itemLayout:"horizontal",dataSource:[{title:"张三 评论了你",desc:"评论内容评论内容评论内容",createTime:"2023-04-06 15:39:00"},{title:"您有3个订单待支付",desc:"订单1,订单2,订单3",createTime:"2023-04-05 15:39:00"},{title:"张三 的请假申请需要您的审批",desc:"",createTime:"2023-04-01 12:08:00"},{title:"本周周报待填写",createTime:"2023-03-02 10:55:00",desc:"说明"}],renderItem:a=>e(pe.Item,{children:e(pe.Item.Meta,{avatar:e(je,{size:48,icon:e(bt,{})}),title:e("a",{href:"https://ant.design",children:a.title}),description:y("div",{children:[a.desc,a.desc&&e("br",{}),e(O.Text,{children:e($n,{style:{fontSize:12},time:a.createTime})})]})})})}),Dn=()=>e(pe,{size:"small",itemLayout:"horizontal",dataSource:[{title:"您有一封新的邮件",type:"mail"},{title:"您有3个订单待支付",type:"payment"},{title:"张三 的请假申请需要您的审批",type:"workflow"},{title:"本周周报待填写",type:"common"}],renderItem:a=>e(pe.Item,{children:e(pe.Item.Meta,{avatar:e(Q,{style:{fontSize:30},type:`icon-${a.type}`}),title:e("a",{href:"https://ant.design",children:a.title}),description:"3天前"})})}),On=()=>y(U,{children:[e(qe,{centered:!0,style:{width:300},defaultActiveKey:"notify",items:[{key:"notify",label:"通知(3)",children:e(Dn,{})},{key:"message",label:"消息(4)",children:e(Fn,{})}],onChange:void 0,tabBarExtraContent:e(N,{type:"link",style:{marginRight:10},children:"清空"})}),e(Z,{style:{margin:"8px 0"}}),y(z,{split:e(Z,{type:"vertical"}),style:{width:"100%",justifyContent:"center",marginBottom:0},children:[e(N,{type:"link",children:"全部已读"}),e(N,{type:"link",children:"查看更多"})]})]}),Hn=t=>e(Ue,{count:98,children:e(Kt,{arrow:!1,content:e(On,{}),placement:"bottomRight",trigger:"click",children:e(Q,{title:"通知提醒",type:"icon-remind",className:"action-icon"})})}),Un=()=>{const{settings:{theme:t},setSetting:a}=r.useContext(ae),o=()=>{a({followSystemTheme:!1,theme:t==="light"?"dark":"light"})};return t==="dark"?e(Q,{onClick:o,title:"主题-深色模式",type:"icon-theme-dark",className:"action-icon"}):e(Q,{onClick:o,title:"主题-明亮模式",type:"icon-theme-light",className:"action-icon"})};const Vn=t=>{const a=["#1890ff","#722ed1","#eb2f96","#00b96b","#52c41a","#13c2c2","#1677ff","#f5222d","#fa8c16","#faad14"],{onChange:o,presetColors:n=a,defaultSelectedColor:s=""}=t,{value:c=s}=t,[l,u]=r.useState(c),h=m=>{u(m),o==null||o(m)};return e("div",{className:"theme-color-wrap",children:n.map(m=>e("div",{onClick:()=>h(m),className:"theme-color-item",style:{backgroundColor:m},title:m,children:l===m&&e(Gt,{className:"checked-icon"})},m))})},Bn=t=>{const{open:a,onClose:o=ne}=t,{settings:n,setSetting:s}=r.useContext(ae),[c]=w.useForm(),[l]=xt(),u=r.useMemo(()=>({...n,theme:n.followSystemTheme?"followSystem":n.theme}),[n]),h=(m,d)=>{const b={...m},{theme:i,fixedMenu:p,fixedHeader:_}=b;i&&(console.log("themeee",i),b.followSystemTheme=!1,i==="followSystem"&&(b.followSystemTheme=!0,b.theme=l)),p&&(b.fixedHeader=!0),_===!1&&(b.fixedMenu=!1),s(b),console.log("chage",m,d)};return ge(()=>{c==null||c.setFieldsValue(u)},[u]),e(Wt,{title:"偏好设置",onClose:o,open:a,children:y(w,{name:"basic",labelCol:{span:5},wrapperCol:{span:19},initialValues:{...u},autoComplete:"off",onValuesChange:h,form:c,children:[e(w.Item,{label:"外观",name:"theme",children:y(F.Group,{buttonStyle:"solid",children:[y(F.Button,{value:"light",children:[e(Q,{type:"icon-theme-light"})," 浅色"]}),y(F.Button,{value:"dark",children:[e(Q,{type:"icon-theme-dark"})," 深色"]}),y(F.Button,{value:"followSystem",children:[e(Q,{type:"icon-followSystem"})," 跟随系统"]})]})}),e(w.Item,{label:"紧凑模式",valuePropName:"checked",name:"compactMode",children:e(be,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(w.Item,{label:"主题色",name:"primaryColor",children:e(Vn,{defaultSelectedColor:n.primaryColor})}),e(Z,{children:"布局"}),e(w.Item,{label:"多标签页",valuePropName:"checked",name:"multitabMode",children:e(be,{checkedChildren:"启用",unCheckedChildren:"关闭"})}),e(w.Item,{label:"固定头部",valuePropName:"checked",name:"fixedHeader",children:e(be,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(w.Item,{help:"固定菜单启用时, 头部也会同步固定",label:"固定菜单",valuePropName:"checked",name:"fixedMenu",children:e(be,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(w.Item,{valuePropName:"checked",label:"显示底部",name:"showFooter",children:e(be,{checkedChildren:"开启",unCheckedChildren:"关闭"})})]})})},zn=t=>{const[a,o]=r.useState(!1);return y("div",{children:[e(Bn,{open:a,onClose:()=>{o(!1)}}),e(Q,{onClick:()=>{o(!0)},title:"设置",type:"icon-settings",className:"action-icon"})]})},qn=()=>{const{userInfo:t,setUserInfo:a,setIsLogin:o}=r.useContext(se),{menuCollapsed:n,setMenuCollapsed:s}=r.useContext(te),{token:{colorBgContainer:c}}=ie.useToken(),l=ue(),u=()=>y("div",{className:"left",children:[e("div",{className:"logo",children:e("span",{className:"logo-text",children:"my-react-tools"})}),e("div",{children:J.createElement(n?Jt:Xt,{onClick:()=>s(!n)})})]}),h=()=>{const m=()=>y(U,{children:[e(Hn,{}),e(In,{}),e(An,{}),e(Un,{}),e(zn,{})]}),d=[{label:e("a",{children:"个人中心"}),icon:e(bt,{}),key:"userCenter"},{label:e("a",{children:"修改资料"}),key:"update",icon:e(_t,{})},{type:"divider"},{label:"退出",icon:e(Zt,{}),key:"logout",onClick:()=>{nn().then(()=>{W.removeToken(),o(!1),a(null),l("/login")})}}];return e("div",{className:"right",children:y(z,{size:"middle",children:[m(),e(Qt,{menu:{items:d},children:y(z,{className:"pointer",children:[e("span",{children:t==null?void 0:t.nickname}),e(je,{src:t==null?void 0:t.avatar})]})})]})})};return e(H.Header,{className:"header",style:{background:c},children:y(U,{children:[u(),h()]})})},It=J.memo(qn),jn=()=>{const t=ue(),{pathname:a}=ye(),[o,n]=r.useState(),{menuList:s,mapPathToMenu:c}=r.useContext(te);let l="/dashboard",u=[],h=!1;const[m]=Ce();ge(()=>{let i=c.get(a);if(!i){let p="";c.forEach(({path:_})=>{a.startsWith(_)&&_.length>p.length&&(p=_)}),p&&(i=c.get(p))}i&&(i!=null&&i.hideInMenu?n([i.parent]):n([a]))},[a]);const d=i=>{const p=c.get(i.key);if(console.log("clicked menu",i,p),!p){console.warn("未获取到菜单信息");return}if(p.path!==a){if((p==null?void 0:p.type)==="url"){window.open(p.path,"_blank");return}if(document.title=`${ee.pageTitlePrefix} - ${p.label}`,(p==null?void 0:p.type)==="iframe"){console.log("打开iframe页面"),t(Nt(p.path));return}t(p.path)}},b=r.useMemo(()=>{const i=_=>_.badge?_.badge==="dot"?e(Ue,{className:"menu-item-badge",offset:[6,0],dot:!0,children:_.label}):e(Ue,{className:"menu-item-badge",offset:[15,0],count:_.badge,children:_.label}):_.label,p=(_,T)=>{const g=[];return!h&&T&&u.push(T.key),_.map(f=>{if(Me(f)&&(f.parent&&a.indexOf(f.path)===0&&(console.log("ccccccccccccccccccccc",f.parent),l=f.parent,h=!0),f.type==="iframe"&&(m.get("url")||"")===f.path&&(h=!0,l=f.key),f.hideInMenu))return;let v;if(bn(f))v={...f};else if(Pe(f))v={...f},f.children&&f.children.length>0&&(v.children=p(f.children));else if(Re(f)||Et(f)){let{icon:S}=f;typeof S=="string"&&S.includes("icon-")&&(S=e(Q,{type:S})),v={key:"",...f,icon:S,label:i(f),children:Re(f)?p(f.children,f):void 0},!h&&f.path===a&&(l=f.key,h=!0)}v&&(v.key=v.key,g.push(v))}),!h&&u.pop(),g};return p(s)},[s]);return e(ea,{style:{height:"100%"},onClick:d,mode:"inline",defaultSelectedKeys:[l],selectedKeys:o,items:b,defaultOpenKeys:u})},Yn=J.memo(jn);const At=()=>{const{menuCollapsed:t}=r.useContext(te),{colorBgContainer:a}=fe();return e(H.Sider,{style:{background:a},trigger:null,className:"left-sider",collapsible:!0,collapsed:t,children:e(Yn,{})})};const Kn=()=>{console.log("MultitabLayout render...");const{menuCollapsed:t}=r.useContext(te);return e(Cn,{children:y(H,{className:"multitab-layout","data-menu-collapsed":t?1:0,children:[e(It,{}),y(H,{children:[e(At,{}),y(H,{className:"content-layout",children:[e(Mn,{}),e(Mt,{})]})]})]})})},Gn=J.memo(Kn);const Wn=({children:t})=>e(H.Content,{className:"content",children:t}),Jn=J.memo(Wn);const Xn=()=>{console.log("SingleLaylut render...");const{menuCollapsed:t}=r.useContext(te);return y(H,{className:"single-tab-layout","data-menu-collapsed":t?1:0,children:[e(It,{}),y(H,{children:[e(At,{}),y(H,{className:"content-layout",children:[e(Rt,{}),e(Jn,{children:e(ta,{})}),e(Mt,{})]})]})]})};const Qn=()=>{const[t,a]=r.useState(!0),{setIsLogin:o,setUserInfo:n}=r.useContext(se),{colorBgContainer:s}=fe(),{settings:{multitabMode:c,fixedMenu:l,fixedHeader:u,theme:h}}=r.useContext(ae),m=ue(),[d]=Ce();return console.log("global layout render..."),r.useEffect(()=>{if(!ct()){m("/login");return}an().then(b=>{if(a(!1),o(!0),n(b),d.has("ghpage")){const i=decodeURIComponent(d.get("ghpage"));m(i);return}}).catch(b=>{b instanceof aa&&pt.error({message:"网络错误",description:"获取用户信息失败, 无法打开页面",duration:null,closeIcon:null})})},[]),ge(()=>{ct()||(j.error("登录状态已失效, 即将跳转到登录页面..."),setTimeout(()=>{m("/login")},500))}),t?e(Xe,{title:"页面加载中",loading:t}):e(wn,{children:y("div",{"data-fixed-menu":l?1:0,"data-fixed-header":u?1:0,style:{background:s},className:`global-layout theme-${h}`,children:[c?e(Gn,{}):e(Xn,{}),e(gn,{})]})})},Zn=J.memo(Qn),lt=()=>e("span",{children:"UserCenterPage"}),eo=()=>e("span",{children:"UserCenterUpdatePage"});const Pt=r.forwardRef(({state:t},a)=>{const[o]=w.useForm(),n=r.useRef(null);return r.useImperativeHandle(a,()=>({form:o,input:n.current}),[o,n]),e("div",{children:y(w,{form:o,labelCol:{span:3},name:"userForm",initialValues:t||void 0,children:[e(w.Item,{name:"username",label:"账号",rules:[{required:!0,message:"请输入账号"}],children:e(A,{placeholder:"请输入账号",ref:n})}),e(w.Item,{name:"password",label:"密码",rules:[{required:!t,message:"请输入密码"}],children:e(A.Password,{placeholder:t?"不修改密码请留空!":"请输入密码"})}),e(w.Item,{name:"nickname",label:"昵称",rules:[{required:!0,message:"请输入昵称"}],children:e(A,{placeholder:"请输入昵称"})}),e(w.Item,{name:"gender",label:"性别",children:y(F.Group,{children:[e(F,{value:1,children:"男"}),e(F,{value:2,children:"女"})]})}),e(w.Item,{name:"mobile",label:"手机号",children:e(A,{placeholder:"请输入手机号"})}),e(w.Item,{name:"email",label:"邮箱",children:e(A,{placeholder:"请输入邮箱"})})]})})}),to=({refreshList:t})=>{const[a,o]=r.useState(!1),{run:n,loading:s}=Y(sn,{manual:!0,debounceWait:100,onSuccess:()=>{var u;o(!1),(u=c.current)==null||u.form.resetFields(),t==null||t()}}),c=r.useRef(null);return y("div",{children:[e(N,{type:"primary",icon:e(Ie,{}),onClick:()=>{o(!0),setTimeout(()=>{var u,h;(h=(u=c.current)==null?void 0:u.input)==null||h.focus()},100)},children:"新增用户"}),e(wt,{open:a,title:"添加用户",okText:"添加",cancelText:"取消",confirmLoading:s,onCancel:()=>o(!1),onOk:()=>{var u;(u=c.current)==null||u.form.validateFields().then(h=>{n(h)}).catch(h=>console.log(h))},children:e(Pt,{ref:c})})]})},ao=(t,a)=>{const o=na(t,a),{tableProps:n}=o,s={...n.pagination,showTotal:(u,h)=>`第${h[0]}-${h[1]} 条/共 ${u} 条`,hideOnSinglePage:!0};n.pagination=s;const c=n.onChange,l=(...u)=>{var T;let[h,m,d,b]=u,i=h,p,_;Object.keys(d).length>0&&(Array.isArray(d)?(_={},d.map(g=>{var f;_[(f=g.column)==null?void 0:f.dataIndex]=g.order})):_={[(T=d.column)==null?void 0:T.dataIndex]:d.order}),Object.keys(m).length>0&&(p=m,console.log("filterrrrrrrrrrrrr",m)),c(i,p,_)};return n.onChange=l,o.tableProps.size="small",o},no=({state:t,refreshList:a})=>{const[o,n]=r.useState(!1),{runAsync:s,loading:c}=Y(cn,{manual:!0,debounceWait:100}),l=r.useRef(null);return y(U,{children:[e(N,{icon:e(_t,{}),size:"small",onClick:()=>{n(!0),setTimeout(()=>{var h,m;(m=(h=l.current)==null?void 0:h.input)==null||m.focus()},100)},children:"编辑"}),e(wt,{open:o,title:"更新用户信息",okText:"保存",cancelText:"取消",confirmLoading:c,onCancel:()=>n(!1),onOk:()=>{var h;(h=l.current)==null||h.form.validateFields().then(m=>{s({...m,id:t.id}).then(()=>{var d;n(!1),(d=l.current)==null||d.form.resetFields(),a==null||a()}).catch(ne)}).catch(m=>console.log(m))},children:e(Pt,{ref:l,state:t})})]})};const ce=t=>{const{children:a,className:o="",style:n={},...s}=t,{colorBgContainer:c}=fe(),l="content-box",u={backgroundColor:c};return e("div",{className:`${l} ${o}`,style:{...u,...n},...s,children:a})},oo=t=>{const{search:a,form:o,onSearch:n,onReset:s,fields:c,title:l="搜索",...u}=t,h=r.useCallback((_,T,g)=>{switch(typeof T=="string"&&["input","number","select"].includes(_)&&(g.placeholder=(g==null?void 0:g.placeholder)||T),_){case"input":return e(A,{...g});case"number":return e(sa,{...g});case"select":return e(Ke,{...g});case"radio":return e(F.Group,{...g});case"date":return e(Qe,{...g});case"dateRange":return e(Qe.RangePicker,{...g});case"checkbox":return e(Ye.Group,{...g});case"cascader":return e(oa,{...g});case"treeSelect":return e(Ae,{...g});default:return e(U,{})}},[]),m=async()=>{await o.validateFields().catch(_=>console.warn(_)),n==null||n(o),a.submit()},d=()=>{s==null||s(o),a.reset()},b={labelCol:{span:5},style:{paddingTop:16}},i=({type:_,name:T,label:g,fieldProps:f={},itemProps:v={}})=>e(we,{span:6,children:e(w.Item,{name:T,label:g,...v,children:h(_,g,f)})},`${T}-${g}`),p=()=>{const _=a.type==="simple"?0:18-c.length%4*6;return y(we,{span:6,offset:_,style:{textAlign:"right"},children:[e(N,{onClick:d,children:"重置"}),e(N,{style:{margin:"0 8px"},type:"primary",onClick:m,children:"查询"}),c.length>3&&y("a",{style:{fontSize:12},onClick:a.changeType,children:[a.type==="advance"?e(ca,{}):e(ra,{}),a.type==="advance"?"收起":"展开"]})]})};return c.length===0?null:y(ce,{children:[e("div",{children:e(O.Title,{level:5,children:l})}),e(w,{form:o,...b,...u,children:y(Ge,{gutter:24,children:[a.type==="advance"?c.map(i):c.slice(0,3).map(i),p()]})})]})},so=()=>{var g;console.log("render ExampleUserListPage");const[t]=w.useForm(),[a,o]=r.useState([]),n=r.useRef();r.useEffect(()=>{n.current=new Map},[]);const{runAsync:s,loading:c}=Y(rn,{manual:!0,debounceWait:100}),{refresh:l,tableProps:u,search:h}=ao(on,{form:t}),m=()=>{h.reset(),h.submit()},d=f=>{var v;typeof f=="number"&&((v=n==null?void 0:n.current)==null||v.set(f,!0)),s({id:f}).then(()=>{typeof f=="object"&&o([]),l()}).finally(()=>{var S;return typeof f=="number"&&((S=n==null?void 0:n.current)==null?void 0:S.delete(f))})},b=r.useMemo(()=>[{title:"ID",dataIndex:"id"},{title:"账号",dataIndex:"username",render:(f,{avatar:v,username:S})=>y(U,{children:[" ",e(je,{src:v})," ",S]})},{title:"昵称",dataIndex:"nickname"},{title:"性别",dataIndex:"gender",render:f=>f===St.male?e(Ze,{color:"blue",children:"男"}):e(Ze,{color:"error",children:"女"})},{title:"邮箱",dataIndex:"email"},{title:"手机号",dataIndex:"mobile",sorter:!0},{title:"注册时间",dataIndex:"create_time",sorter:!0},{title:"操作",key:"operation",fixed:"right",render:(f,v)=>{var $;const{id:S}=v;return y(z,{children:[e(et,{title:"确认要删除这条数据吗?",onConfirm:()=>d(S),children:e(N,{loading:($=n==null?void 0:n.current)==null?void 0:$.has(S),icon:e(la,{}),size:"small",danger:!0,children:"删除"})}),e(no,{state:v,refreshList:l})]})}}],[]),p={selectedRowKeys:a,onChange:f=>{console.log("selectedRowKeys changed: ",f),o(f)}},_=a.length>0;return y(U,{children:[e(oo,{form:t,search:h,fields:[{type:"input",label:"账号",name:"username"},{type:"input",label:"手机号",name:"mobile"},{type:"input",label:"邮箱",name:"email"},{type:"select",label:"性别",name:"gender",fieldProps:{options:[{label:"男",value:"1"},{label:"女",value:"2"}]}}]}),e("br",{}),y(ce,{children:[y("div",{className:"table-header",children:[e("div",{className:"left",children:e(O.Title,{level:5,children:"用户列表"})}),e("div",{className:"right",children:y(z,{size:"middle",children:[e(et,{title:`确定要删除这${a.length}条数据吗?`,onConfirm:()=>d(a),children:e(N,{type:"primary",danger:!0,disabled:!_,loading:c&&((g=n.current)==null?void 0:g.size)===0,children:"批量删除"})}),e(to,{refreshList:m}),e(N,{type:"link",title:"点击刷新",onClick:l,icon:e(da,{})})]})})]}),e(ia,{rowKey:"id",rowSelection:p,columns:b,...u})]})]})},Se=({title:t="空白页"})=>{const[a,o]=r.useState(0);return Ce(),console.log("BlankPage: 被调用"),r.useEffect(()=>(console.log("BlankPage: 初次渲染"),()=>{console.log("BlankPage: 被卸载了")}),[]),y(ce,{style:{height:"500px"},children:[e(O.Title,{level:4,children:t}),y(O.Text,{children:["Count: ",a]}),e("br",{}),e(N,{onClick:n=>o(s=>s+1),children:"add"})]})},co=()=>ua.init((Math.random()*1e7).toString(16).substr(0,4)+new Date().getTime()+Math.random().toString()),ro=(t,a)=>{let o=Math.floor(Math.random()*(t-a)+a);return o=parseInt(o+"")+parseFloat(Math.random()+""),o=Math.round(o*100)/100,o},lo=[{code:"011102",desc:"采煤机配件"},{code:"011108",desc:"掘进机配件"},{code:"011112",desc:"液压支架配件"},{code:"011114",desc:"电液控制系统配件"},{code:"011116",desc:"乳化液泵站配件"},{code:"011118",desc:"喷雾泵站配件"},{code:"011130",desc:"采掘设备通用配件"},{code:"011504",desc:"装岩机配件"},{code:"011702",desc:"井下刮板输送机配件"},{code:"011704",desc:"井下转载机配件"},{code:"011716",desc:"矿用机车配件"},{code:"011720",desc:"井下防爆无轨胶轮车配件"},{code:"011908",desc:"矿井提升机配件"},{code:"020704",desc:"汽机辅助设备配件"},{code:"030504",desc:"轨道联结件"},{code:"060502",desc:"反应器"},{code:"060922",desc:"捣固焦炉配件"},{code:"069904",desc:"煤焦化专用机械设备配件"},{code:"069999",desc:"煤化工设备配件"},{code:"080302",desc:"内燃机油"},{code:"080304",desc:"齿轮油"},{code:"080306",desc:"液压油"},{code:"080308",desc:"全损耗系统用油"},{code:"080312",desc:"压缩机油"},{code:"080506",desc:"乳化液"},{code:"080710",desc:"锂基润滑脂"},{code:"080712",desc:"复合锂基润滑脂"},{code:"080718",desc:"脲基润滑脂"},{code:"080724",desc:"高低温润滑脂"},{code:"080732",desc:"特种润滑脂"},{code:"090314",desc:"角钢"},{code:"090324",desc:"圆钢"},{code:"090326",desc:"方钢"},{code:"090328",desc:"扁钢"},{code:"090702",desc:"钢板"},{code:"090902",desc:"无缝钢管"},{code:"090904",desc:"焊接钢管"},{code:"100502",desc:"矿用移动型阻燃橡套电缆"},{code:"100504",desc:"矿用固定敷设阻燃电缆"},{code:"100702",desc:"船用电力电缆"},{code:"100904",desc:"聚氯乙烯绝缘电线电缆"},{code:"101308",desc:"交联电力电缆"},{code:"101310",desc:"特殊电力电缆"},{code:"101504",desc:"塑料绝缘控制电缆"},{code:"101508",desc:"信号电缆"},{code:"101906",desc:"电伴热带"},{code:"102102",desc:"各种光缆"},{code:"102304",desc:"电缆导体用接线端头或线鼻子"},{code:"102310",desc:"电缆桥架及附件"},{code:"102314",desc:"电力线路金具"},{code:"110106",desc:"气象仪器"},{code:"111104",desc:"通信、线缆检测分析仪器"},{code:"111504",desc:"气体减压器"},{code:"111508",desc:"标准压力表"},{code:"111510",desc:"压力表"},{code:"111512",desc:"压力变送器"},{code:"111514",desc:"差压变送器"},{code:"111518",desc:"特种压力表"},{code:"111704",desc:"流量计"},{code:"111916",desc:"磁翻转液位计"},{code:"111922",desc:"雷达物位计"},{code:"111990",desc:"物位仪表配件"},{code:"112126",desc:"酸度仪"},{code:"112140",desc:"可燃有毒气体检测器"},{code:"112190",desc:"分析仪配件"},{code:"112302",desc:"记录、显示仪"},{code:"112306",desc:"巡回检测仪"},{code:"112504",desc:"电动执行机构"},{code:"112508",desc:"单座调节阀"},{code:"112514",desc:"控制球阀"},{code:"112518",desc:"控制蝶阀"},{code:"112532",desc:"阀门定位器"},{code:"112538",desc:"电磁阀"},{code:"112902",desc:"仪表管件接头"},{code:"112910",desc:"仪表用套管"},{code:"112999",desc:"其他仪表管件"},{code:"113302",desc:"电流表"},{code:"113314",desc:"万用表"},{code:"113318",desc:"电阻测量仪器"},{code:"113330",desc:"电工仪器仪表配件及附件"},{code:"113504",desc:"测厚仪"},{code:"113514",desc:"传感器及转换器"},{code:"113722",desc:"计量标准器具附件"},{code:"113912",desc:"集中取样分析设备"},{code:"113990",desc:"实验室仪器及装置配件"},{code:"114114",desc:"光学仪器附件"},{code:"114306",desc:"流量校验仪器及设备"},{code:"114502",desc:"气体安全检测仪器"},{code:"120106",desc:"聚酯输送带"},{code:"120502",desc:"各种输送带"},{code:"130108",desc:"高压球阀"},{code:"130302",desc:"中压闸阀"},{code:"130304",desc:"中压截止阀"},{code:"130308",desc:"中压球阀"},{code:"130502",desc:"低压闸阀"},{code:"130504",desc:"低压截止阀"},{code:"130516",desc:"低压止回阀"},{code:"130520",desc:"低压蝶阀"},{code:"130524",desc:"低压球阀"},{code:"130526",desc:"低压疏水阀"},{code:"130599",desc:"其他低压阀门"},{code:"130706",desc:"中压安全阀"},{code:"130710",desc:"低压安全阀"},{code:"131504",desc:"塑料阀"},{code:"131999",desc:"其他各种阀门"},{code:"132104",desc:"对焊法兰"},{code:"132106",desc:"平焊法兰"},{code:"132116",desc:"盲法兰"},{code:"132704",desc:"单头螺纹短节"},{code:"132706",desc:"双头螺纹短节"},{code:"132902",desc:"弯头"},{code:"133302",desc:"三通"},{code:"133304",desc:"四通"},{code:"133902",desc:"各种膨胀节(补偿器)"},{code:"134102",desc:"各种金属软管"},{code:"134302",desc:"各种阻火器及配件"},{code:"140102",desc:"单级清水离心泵"},{code:"140106",desc:"多级清水离心泵"},{code:"140132",desc:"潜水泵"},{code:"141108",desc:"齿轮泵"},{code:"141302",desc:"各种其他泵"},{code:"141502",desc:"单级清水离心泵配件"},{code:"141510",desc:"单级耐腐蚀离心泵配件"},{code:"141520",desc:"污水泵配件"},{code:"141522",desc:"渣浆泵配件"},{code:"142308",desc:"隔膜泵配件"},{code:"142310",desc:"计量泵配件"},{code:"160112",desc:"铁线"},{code:"160116",desc:"普通钢丝绳"},{code:"160118",desc:"重要用途钢丝绳"},{code:"160144",desc:"脚手架"},{code:"160146",desc:"金属扣件"},{code:"160199",desc:"其他黑色金属材料及制品"},{code:"160302",desc:"焊条"},{code:"160502",desc:"螺栓"},{code:"160504",desc:"螺柱"},{code:"160506",desc:"螺母"},{code:"160902",desc:"巷道金属支架"},{code:"160916",desc:"金属防护、支护用品附件及配件"},{code:"170302",desc:"玻璃"},{code:"170304",desc:"玻璃纤维及其制品"},{code:"170510",desc:"实验室常备玻璃仪器"},{code:"170712",desc:"玻璃钢板"},{code:"171502",desc:"普通轮胎"},{code:"171506",desc:"传动带"},{code:"171508",desc:"橡胶板"},{code:"171510",desc:"橡胶管"},{code:"171516",desc:"防护类胶布"},{code:"171518",desc:"橡胶零件"},{code:"171520",desc:"胶管总成"},{code:"171704",desc:"塑料板"},{code:"171706",desc:"塑料丝、绳及其他编织品"},{code:"171710",desc:"塑料零件"},{code:"171714",desc:"塑料管"},{code:"171716",desc:"塑料型材"},{code:"171799",desc:"其他塑料制品"},{code:"171902",desc:"石棉橡胶板"},{code:"171908",desc:"石棉绳、线"},{code:"179904",desc:"竹材及其制品"},{code:"179910",desc:"风筒及附件"},{code:"179999",desc:"其他制品"},{code:"180199",desc:"其他有机化学品"},{code:"180304",desc:"碱类"},{code:"180708",desc:"除草剂"},{code:"181702",desc:"各种其他化工产品"},{code:"181904",desc:"通用有机试剂"},{code:"181910",desc:"基准及标准试剂"},{code:"182102",desc:"调和漆"},{code:"182114",desc:"防锈漆"},{code:"182120",desc:"墙面涂料"},{code:"182302",desc:"稀释剂"},{code:"183114",desc:"水处理剂"},{code:"183708",desc:"活性炭"},{code:"183902",desc:"各种凡士林"},{code:"184302",desc:"皮带胶粘材料"},{code:"184304",desc:"密封结构胶粘剂"},{code:"184399",desc:"其他胶粘剂"},{code:"184502",desc:"工业清洗剂"},{code:"191504",desc:"石膏制品"},{code:"191902",desc:"砖"},{code:"191932",desc:"彩钢瓦/瓦楞板"},{code:"192104",desc:"耐火泥"},{code:"192702",desc:"普通门"},{code:"192704",desc:"工业门"},{code:"192708",desc:"防护栏栅"},{code:"192904",desc:"卫生洁具"},{code:"192910",desc:"建筑用小五金"},{code:"193302",desc:"磨具"},{code:"193304",desc:"超硬材料磨具"},{code:"193502",desc:"水暖管件"},{code:"193504",desc:"采暖散热器"},{code:"200102",desc:"普通机械密封"},{code:"200502",desc:"O型密封圈"},{code:"200506",desc:"防爆密封圈"},{code:"200508",desc:"油封件"},{code:"200702",desc:"基本型缠绕垫"},{code:"200704",desc:"内外环缠绕垫"},{code:"200706",desc:"带内环缠绕垫"},{code:"200914",desc:"聚四氟乙烯垫片"},{code:"209904",desc:"各种其他密封件"},{code:"210320",desc:"液力偶合器配件"},{code:"210326",desc:"液压泵站"},{code:"210330",desc:"液压元件"},{code:"210502",desc:"球轴承"},{code:"210504",desc:"滚子轴承"},{code:"210902",desc:"减速器"},{code:"211104",desc:"联轴器"},{code:"211504",desc:"蒸汽锅炉配件"},{code:"212114",desc:"空冷器"},{code:"212702",desc:"空气调节机"},{code:"212904",desc:"往复式压缩机"},{code:"212908",desc:"压缩机配件"},{code:"212916",desc:"一般用途通风机"},{code:"212920",desc:"通风机配件"},{code:"212998",desc:"其他风机"},{code:"213158",desc:"空冷凝汽器控制系统"},{code:"213302",desc:"分散控制系统(DCS)配件"},{code:"213304",desc:"可编程控制器PLC系统配件"},{code:"213388",desc:"机器人配件"},{code:"213708",desc:"除尘设备配件"},{code:"213710",desc:"过滤装置"},{code:"213712",desc:"过滤装置配件"},{code:"213990",desc:"水处理设备配件"},{code:"214314",desc:"台、案秤"},{code:"214990",desc:"切焊设备附件"},{code:"215102",desc:"张紧放线机械"},{code:"216104",desc:"离心设备配件"},{code:"216312",desc:"综合保护及通讯系统配件"},{code:"216320",desc:"喷雾降尘系统配件"},{code:"216322",desc:"矿井安全监测系统"},{code:"216324",desc:"矿井安全监测系统配件"},{code:"217332",desc:"干燥器、干燥机"},{code:"217344",desc:"加油机"},{code:"217354",desc:"采样制样设备"},{code:"219912",desc:"喷射机械配件"},{code:"219942",desc:"清洗机配件"},{code:"219964",desc:"硫化机配件"},{code:"230102",desc:"起重滑车"},{code:"230106",desc:"手、气、液动葫芦"},{code:"230108",desc:"电动葫芦"},{code:"230118",desc:"起重葫芦配件"},{code:"230120",desc:"绞车、绞盘"},{code:"230148",desc:"起重机配件"},{code:"230166",desc:"悬挂单轨系统"},{code:"230168",desc:"起重吊索具"},{code:"230790",desc:"输送机配件"},{code:"230990",desc:"给料机配件"},{code:"231104",desc:"堆取机械配件"},{code:"231126",desc:"液体装卸设备配件"},{code:"231302",desc:"货架、货柜"},{code:"231306",desc:"仓储辅助设施"},{code:"241102",desc:"有线电话设备"},{code:"241108",desc:"无线对讲设备"},{code:"241110",desc:"移动通信设备"},{code:"250102",desc:"自带能源便携式电灯"},{code:"250104",desc:"室内灯具"},{code:"250106",desc:"公共照明灯具"},{code:"250110",desc:"防爆灯具"},{code:"250116",desc:"灯泡/灯管"},{code:"250190",desc:"照明装置配件"},{code:"250302",desc:"原电池(组)"},{code:"250306",desc:"蓄电池(组)"},{code:"250506",desc:"报警器及类似装置"},{code:"250706",desc:"交流电动机"},{code:"250790",desc:"电动机、防爆电动机配件"},{code:"251128",desc:"变电站配件"},{code:"251302",desc:"互感器"},{code:"251506",desc:"变频设备(器)"},{code:"251508",desc:"变频设备(器)配件"},{code:"251522",desc:"稳定电源"},{code:"251526",desc:"不间断电源(UPS)"},{code:"251538",desc:"整流组件、整流模块"},{code:"252350",desc:"高压熔断器"},{code:"252502",desc:"低压电路开关"},{code:"252504",desc:"低压电路开关配件"},{code:"252510",desc:"低压电路断路器"},{code:"252514",desc:"低压电路熔断器"},{code:"252518",desc:"低压电路的控制电器"},{code:"252520",desc:"低压电路的控制电器配件"},{code:"252534",desc:"漏电保护器"},{code:"252540",desc:"低压电气柜配件"},{code:"252542",desc:"低压配电箱"},{code:"252544",desc:"低压配电箱配件"},{code:"252550",desc:"低压电路插座(插线板)"},{code:"252552",desc:"插头"},{code:"252554",desc:"信号隔离器、安全栅"},{code:"252702",desc:"隔爆型起动控制装置"},{code:"252706",desc:"隔爆型电磁起动器"},{code:"252708",desc:"隔爆型电磁起动器配件"},{code:"252712",desc:"隔爆型馈电开关配件"},{code:"252718",desc:"防爆电器装置"},{code:"252724",desc:"防爆接线箱"},{code:"252728",desc:"防爆电器安装管件"},{code:"252799",desc:"其他防爆电器及装置配件"},{code:"252902",desc:"继电器"},{code:"252904",desc:"继电器配件"},{code:"252906",desc:"综合保护装置"},{code:"252908",desc:"综合保护装置配件"},{code:"259904",desc:"电磁铁"},{code:"259908",desc:"永久磁铁"},{code:"259914",desc:"传感器"},{code:"260702",desc:"一般特种车辆配件"},{code:"269902",desc:"电瓶车"},{code:"269904",desc:"电瓶车配件"},{code:"269906",desc:"人力车"},{code:"269908",desc:"人力车配件"},{code:"270102",desc:"手工刀"},{code:"270320",desc:"钳子"},{code:"270330",desc:"扳手"},{code:"270340",desc:"攻丝工具"},{code:"270358",desc:"成套手工工具"},{code:"270360",desc:"千斤顶"},{code:"270390",desc:"通用手工工具零配件"},{code:"270399",desc:"其他手工工具"},{code:"270502",desc:"农林手工工具"},{code:"270508",desc:"煤矿专用手工工具"},{code:"270702",desc:"防爆扳手"},{code:"270908",desc:"量尺"},{code:"270914",desc:"角度尺"},{code:"271102",desc:"钻头"},{code:"271516",desc:"气钻"},{code:"271518",desc:"气扳机"},{code:"271702",desc:"电动金属切削工具"},{code:"271704",desc:"电动砂磨工具"},{code:"271706",desc:"电动装配工具"},{code:"271714",desc:"建筑用电动工具"},{code:"271790",desc:"电动工具配件"},{code:"271799",desc:"其他电动工具"},{code:"271906",desc:"停送电工具"},{code:"271910",desc:"电工钳"},{code:"271999",desc:"其他电工工具"},{code:"272126",desc:"弹涂机"},{code:"272302",desc:"泥瓦工具"},{code:"272504",desc:"油壶"},{code:"272590",desc:"其他加油工具"},{code:"280104",desc:"冷藏冷冻电器"},{code:"280308",desc:"饮用水加工器具"},{code:"280316",desc:"洗碗(碟)机等食具清洁器具"},{code:"289910",desc:"音频输入、输出设备"},{code:"289912",desc:"音频输入、输出设备配件"},{code:"289924",desc:"电风扇"},{code:"290116",desc:"装订设备"},{code:"290124",desc:"办公机械耗材"},{code:"290302",desc:"计算机"},{code:"290306",desc:"输入设备"},{code:"290308",desc:"输出设备"},{code:"290506",desc:"应用系统"},{code:"290704",desc:"网络交换机、集线器"},{code:"290706",desc:"网络收发设备"},{code:"290720",desc:"网络线缆"},{code:"290799",desc:"计算机网络设备配件"},{code:"290902",desc:"各种摄影摄像器材"},{code:"300102",desc:"安全防护服"},{code:"300104",desc:"安全帽"},{code:"300108",desc:"防护手套"},{code:"300112",desc:"防护鞋、靴"},{code:"300116",desc:"呼吸防护用品"},{code:"300120",desc:"安全防护用具"},{code:"300199",desc:"其他安全防护用品"},{code:"300314",desc:"清洁卫生类用品"},{code:"300502",desc:"灭火器"},{code:"300510",desc:"消防水带"},{code:"300512",desc:"消防栓"},{code:"300518",desc:"消防辅助器材"},{code:"300522",desc:"消防系统及器材配件"},{code:"330306",desc:"桌面办公用品"},{code:"330506",desc:"复印、打印、传真纸"},{code:"330702",desc:"床"},{code:"330710",desc:"柜子"},{code:"330712",desc:"架子"},{code:"330718",desc:"门窗帘及附件"},{code:"330904",desc:"炊事用具"},{code:"331306",desc:"医用电子设备"},{code:"331504",desc:"篷布"},{code:"331506",desc:"车座套"},{code:"331702",desc:"各种实验室辅助器材"},{code:"331902",desc:"家居办公杂品"},{code:"331906",desc:"布类杂品"},{code:"331914",desc:"标志牌"},{code:"331999",desc:"其他类杂品"},{code:"333102",desc:"工具箱、包"}];const de={阿里巴巴:{url:"https://p4psearch.1688.com/page.html?hpageId=old-sem-pc-list&keywords=",key:"阿里巴巴",id:"alibaba"},爱采购:{url:"https://b2b.baidu.com/s?q=",key:"爱采购",id:"aicaigou"},淘宝:{url:"https://s.taobao.com/search?q=",key:"淘宝",id:"taobao"},京东:{url:"https://search.jd.com/search?keyword=",key:"京东",id:"jingdong"},百川资讯:{url:"http://www.baiinfo.com/search?wd=",key:"百川资讯",id:"baichuan"},卓创资讯:{url:"https://prices.sci99.com/cn/search.aspx?keyword=",key:"卓创资讯",id:"zhuochuang"}},io=()=>{const[t,a]=r.useState(""),[o,n]=r.useState(""),[s,c]=r.useState(de.阿里巴巴),l=d=>{if(n(d),a(d),s!=="历史价格"){let b=document.getElementById(s.id);b.src=b.src}},u=(d,b)=>({id:co(),date:ma().subtract(b,"days").format("YYYY-MM-DD"),material:d,price:ro(100,1e3)});r.useEffect(()=>{const b=[];for(let i=0;i<30;i++)b.push(u(t,i))},[t]);const h=()=>Object.keys(de).map((d,b)=>({label:e("div",{style:{fontSize:"1.2rem",padding:"0 1.2rem"},children:de[d].key}),key:d,children:e("iframe",{className:"iframeStyle",id:de[d].id,src:`${de[d].url}${t}`})})),m=d=>{c(de[d]?de[d]:d)};return y(U,{children:[t===""?e(ve,{title:"常用搜索",extra:e(A.Search,{placeholder:"输入搜索关键词",allowClear:!0,enterButton:e(tt,{}),size:"large",onSearch:l}),children:e(Ge,{style:{borderTop:"1px solid #eee",borderLeft:"1px solid #eee"},children:lo.map((d,b)=>e(U,{children:b<32?e(we,{span:6,style:{borderRight:"1px solid #eee",borderBottom:"1px solid #eee",padding:"5px 15px"},children:e("span",{style:{cursor:"pointer"},onClick:()=>l(d.desc),children:d.desc})},d.code):null}))})}):null,e(ve,{style:{width:"100%",display:`${t===""?"none":"block"}`},title:"常用搜索",extra:e(N,{onClick:()=>a(""),children:"返回"}),children:e(qe,{onChange:m,activeKey:s.key,type:"card",items:h(),tabBarGutter:10,tabBarExtraContent:e(A.Search,{placeholder:"输入搜索关键词",allowClear:!0,style:{width:600},enterButton:e(tt,{}),size:"large",onSearch:l,value:o,onChange:d=>n(d.target.value)})})})]})},Lt=(t,a)=>{const{xAxisData:o,data1:n,data2:s}=t;return{animation:a,title:{text:"Bar Animation Delay"},legend:{data:["bar","bar2"]},toolbox:{feature:{magicType:{type:["stack"]},dataView:{},saveAsImage:{pixelRatio:2}}},tooltip:{},xAxis:{data:o,splitLine:{show:!1}},yAxis:{},series:[{name:"bar",type:"bar",data:n,emphasis:{focus:"series"},animationDelay:function(c){return c*10}},{name:"bar2",type:"bar",data:s,emphasis:{focus:"series"},animationDelay:function(c){return c*10+100}}],animationEasing:"elasticOut",animationDelayUpdate:function(c){return c*5}}},uo=(t,a="500px",o="500px")=>{let n=document.createElement("div");n.id="container",n.style.display="none",n.style.width=a,n.style.height=o,document.body.appendChild(n);const s=ha(n);s.setOption(t);const c=s.getDataURL({type:"png"});return document.body.removeChild(n),c},mo=t=>{console.log("echartsData2",t);const a=[...t];let o=[];return a.forEach(n=>{for(let s=0;s<n.data.details.length;s++){const c=[new x({children:[new k({text:`${n.name}`,style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],rowSpan:n.data.details.length+1,verticalAlign:q.CENTER,shading:{fill:"D3EBF7"}})],l=[new x({children:[new k({text:`${n.data.details[s].coalName}`,style:"table2bold",alignment:C.CENTER,spacing:{before:100,after:100}})]})],u=[new x({children:[new k({text:"合计",style:"table2bold",alignment:C.CENTER,spacing:{before:100,after:100}})],shading:{fill:"#FF9966"}})],h=[new x({children:[new k({text:`${n.data.total}`,style:"table2blue",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:`${n.data.passRate}`,style:"table2green",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:"-",style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:"-",style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:"-",style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:"-",style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:"-",style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:"-",style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:"-",style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:"-",style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:"-",style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:"-",style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:"-",style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]})],m=[new x({children:[new k({text:`${n.data.details[s].total}`,style:"table2blue",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:`${n.data.details[s].passRate}`,style:"table2green",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:`${n.data.details[s].Mt_wgt_val}`,style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:`${n.data.details[s].Ad_wgt_val}`,style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:`${n.data.details[s].Ad_pass_rate}`,style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:`${n.data.details[s].Vdaf_wgt_val}`,style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:`${n.data.details[s].Vdaf_pass_rate}`,style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:`${n.data.details[s].Std_wgt_val}`,style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:`${n.data.details[s].Std_pass_rate}`,style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:`${n.data.details[s].g_wgt_val}`,style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:`${n.data.details[s].g_pass_rate}`,style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:`${n.data.details[s].y_wgt_val}`,style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]}),new x({children:[new k({text:`${n.data.details[s].y_pass_rate}`,style:"table2",alignment:C.CENTER,spacing:{before:100,after:100}})]})];s==0?o.push(new me({children:c.concat(l.concat(m))})):s==n.data.details.length-1?(o.push(new me({children:l.concat(m)})),o.push(new me({children:u.concat(h)}))):o.push(new me({children:l.concat(m)}))}}),new pa({alignment:C.CENTER,rows:[new me({children:[new x({children:[new k({text:"单位",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],rowSpan:2,verticalAlign:q.CENTER,shading:{fill:"203764"}}),new x({children:[new k({text:"煤种",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],rowSpan:2,verticalAlign:q.CENTER,shading:{fill:"203764"}}),new x({children:[new k({text:"数量(吨)",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],rowSpan:2,verticalAlign:q.CENTER,shading:{fill:"203764"}}),new x({children:[new k({text:"总合格率(%)",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],rowSpan:2,verticalAlign:q.CENTER,shading:{fill:"203764"}}),new x({children:[new k({text:"全水Mt(%)",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],rowSpan:2,verticalAlign:q.CENTER,shading:{fill:"203764"}}),new x({children:[new k({text:"灰分(Ad)",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],columnSpan:2,verticalAlign:q.CENTER,shading:{fill:"203764"}}),new x({children:[new k({text:"挥发分(Vdaf)",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],columnSpan:2,verticalAlign:q.CENTER,shading:{fill:"203764"}}),new x({children:[new k({text:"硫分(St,d)",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],columnSpan:2,verticalAlign:q.CENTER,shading:{fill:"203764"}}),new x({children:[new k({text:"粘结指数(GR.I)",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],columnSpan:2,verticalAlign:q.CENTER,shading:{fill:"203764"}}),new x({children:[new k({text:"胶质层厚度(Y)",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],columnSpan:2,verticalAlign:q.CENTER,shading:{fill:"203764"}})],cantSplit:!0}),new me({children:[new x({children:[new k({text:"加权",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],shading:{fill:"203764"}}),new x({children:[new k({text:"合格率(%)",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],shading:{fill:"203764"}}),new x({children:[new k({text:"加权",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],shading:{fill:"203764"}}),new x({children:[new k({text:"合格率(%)",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],shading:{fill:"203764"}}),new x({children:[new k({text:"加权",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],shading:{fill:"203764"}}),new x({children:[new k({text:"合格率(%)",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],shading:{fill:"203764"}}),new x({children:[new k({text:"加权",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],shading:{fill:"203764"}}),new x({children:[new k({text:"合格率(%)",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],shading:{fill:"203764"}}),new x({children:[new k({text:"加权",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],shading:{fill:"203764"}}),new x({children:[new k({text:"合格率(%)",style:"table2HeaderStyle",alignment:C.CENTER,spacing:{before:100,after:100}})],shading:{fill:"203764"}})],cantSplit:!0}),...o],width:{size:12e3,type:ga.DXA}})},ho=[{name:"西来峰焦化厂",data:{from:"2024-2-26",to:"2024-3-25",purchaseType:"总量",coalType:["1/3焦煤08120","1/3焦煤20090","1/3焦煤（11灰 0.7硫）","1/3焦煤20105","弱粘煤（04040）","无烟煤（03060）","无烟煤（04080）"],passRate:29.08,total:269026.02,details:[{Mt_wgt_val:12.07,Ad_pass_rate:74,Ad_wgt_val:11.73,Vdaf_pass_rate:0,Vdaf_wgt_val:32.89,Std_pass_rate:88.12,Std_wgt_val:.7,g_pass_rate:100,g_wgt_val:93.9,y_pass_rate:100,y_wgt_val:20.7,passRate:0,total:28796.68,coalName:"1/3焦煤08120",type:"精煤"},{Mt_wgt_val:11.59,Ad_pass_rate:71.83,Ad_wgt_val:8.75,Vdaf_pass_rate:100,Vdaf_wgt_val:27.85,Std_pass_rate:93.07,Std_wgt_val:1.88,g_pass_rate:100,g_wgt_val:94.66,y_pass_rate:100,y_wgt_val:21.63,passRate:64.9,total:22745.86,coalName:"1/3焦煤20090",type:"精煤"},{Mt_wgt_val:12.68,Ad_pass_rate:20.51,Ad_wgt_val:11.16,Vdaf_pass_rate:54.71,Vdaf_wgt_val:33.97,Std_pass_rate:99.29,Std_wgt_val:.53,g_pass_rate:100,g_wgt_val:94.82,y_pass_rate:"-",y_wgt_val:20.93,passRate:5.88,total:134636.18,coalName:"1/3焦煤（11灰 0.7硫）",type:"精煤"},{Mt_wgt_val:11.58,Ad_pass_rate:58.49,Ad_wgt_val:10.44,Vdaf_pass_rate:57.96,Vdaf_wgt_val:29.78,Std_pass_rate:100,Std_wgt_val:1.8,g_pass_rate:100,g_wgt_val:93.3,y_pass_rate:100,y_wgt_val:20.49,passRate:25.49,total:24403.4,coalName:"1/3焦煤20105",type:"精煤"},{Mt_wgt_val:17.35,Ad_pass_rate:90.11,Ad_wgt_val:3.65,Vdaf_pass_rate:100,Vdaf_wgt_val:36.44,Std_pass_rate:100,Std_wgt_val:.26,g_pass_rate:"-",g_wgt_val:"-",y_pass_rate:"-",y_wgt_val:"-",passRate:90.11,total:48393.02,coalName:"弱粘煤（04040）",type:"精煤"},{Mt_wgt_val:12.68,Ad_pass_rate:58.86,Ad_wgt_val:5.96,Vdaf_pass_rate:100,Vdaf_wgt_val:7.67,Std_pass_rate:100,Std_wgt_val:.24,g_pass_rate:"-",g_wgt_val:"-",y_pass_rate:"-",y_wgt_val:"-",passRate:58.86,total:8808.16,coalName:"无烟煤（03060）",type:"精煤"},{Mt_wgt_val:13.52,Ad_pass_rate:61.04,Ad_wgt_val:7.79,Vdaf_pass_rate:64.84,Vdaf_wgt_val:9.43,Std_pass_rate:100,Std_wgt_val:.24,g_pass_rate:"-",g_wgt_val:"-",y_pass_rate:"-",y_wgt_val:"-",passRate:43.42,total:1242.72,coalName:"无烟煤（04080）",type:"精煤"}]}},{name:"巴能公司焦化厂",data:{from:"2024-2-26",to:"2024-3-25",purchaseType:"总量",coalType:["弱粘煤（04040）","1/3焦煤20105","1/3焦煤","蒙古3#精煤","1/3焦洗精煤","无烟煤（03060）","1/3焦煤（20105）","1/3焦煤20090","主焦18110","蒙古1/3焦煤"],passRate:21.92,total:72396.33,details:[{Mt_wgt_val:18.49,Ad_pass_rate:65.39,Ad_wgt_val:3.76,Vdaf_pass_rate:100,Vdaf_wgt_val:36.03,Std_pass_rate:100,Std_wgt_val:.25,g_pass_rate:"-",g_wgt_val:"-",y_pass_rate:"-",y_wgt_val:"-",passRate:65.39,total:14432.75,coalName:"弱粘煤（04040）",type:"精煤"},{Mt_wgt_val:11.24,Ad_pass_rate:75.94,Ad_wgt_val:10.38,Vdaf_pass_rate:33.99,Vdaf_wgt_val:30.29,Std_pass_rate:100,Std_wgt_val:1.69,g_pass_rate:100,g_wgt_val:92.25,y_pass_rate:100,y_wgt_val:22.12,passRate:24.39,total:14490.6,coalName:"1/3焦煤20105",type:"精煤"},{Mt_wgt_val:11.36,Ad_pass_rate:0,Ad_wgt_val:11.43,Vdaf_pass_rate:0,Vdaf_wgt_val:33.5,Std_pass_rate:100,Std_wgt_val:.53,g_pass_rate:100,g_wgt_val:95.06,y_pass_rate:100,y_wgt_val:22.52,passRate:0,total:12132.75,coalName:"1/3焦煤",type:"精煤"},{Mt_wgt_val:7.49,Ad_pass_rate:2.68,Ad_wgt_val:11.06,Vdaf_pass_rate:100,Vdaf_wgt_val:25.74,Std_pass_rate:96.62,Std_wgt_val:.64,g_pass_rate:74.58,g_wgt_val:80.53,y_pass_rate:"-",y_wgt_val:14.52,passRate:2.68,total:22450.8,coalName:"蒙古3#精煤",type:"精煤"},{Mt_wgt_val:7.97,Ad_pass_rate:61.71,Ad_wgt_val:10.28,Vdaf_pass_rate:78.41,Vdaf_wgt_val:34.32,Std_pass_rate:59.88,Std_wgt_val:.74,g_pass_rate:100,g_wgt_val:88.31,y_pass_rate:"-",y_wgt_val:16.15,passRate:0,total:2357.45,coalName:"1/3焦洗精煤",type:"精煤"},{Mt_wgt_val:12.29,Ad_pass_rate:58.43,Ad_wgt_val:5.89,Vdaf_pass_rate:100,Vdaf_wgt_val:7.36,Std_pass_rate:100,Std_wgt_val:.22,g_pass_rate:"-",g_wgt_val:"-",y_pass_rate:"-",y_wgt_val:"-",passRate:58.43,total:1896.85,coalName:"无烟煤（03060）",type:"精煤"},{Mt_wgt_val:11.02,Ad_pass_rate:100,Ad_wgt_val:10.21,Vdaf_pass_rate:0,Vdaf_wgt_val:34.36,Std_pass_rate:100,Std_wgt_val:1.89,g_pass_rate:0,g_wgt_val:77.29,y_pass_rate:0,y_wgt_val:15,passRate:0,total:1972.85,coalName:"1/3焦煤（20105）",type:"精煤"},{Mt_wgt_val:11.52,Ad_pass_rate:43.81,Ad_wgt_val:9.89,Vdaf_pass_rate:100,Vdaf_wgt_val:27.12,Std_pass_rate:81.39,Std_wgt_val:1.91,g_pass_rate:100,g_wgt_val:93.92,y_pass_rate:100,y_wgt_val:22.77,passRate:36.42,total:1876.15,coalName:"1/3焦煤20090",type:"精煤"},{Mt_wgt_val:10.78,Ad_pass_rate:49.89,Ad_wgt_val:11.08,Vdaf_pass_rate:100,Vdaf_wgt_val:26.68,Std_pass_rate:100,Std_wgt_val:1.66,g_pass_rate:100,g_wgt_val:92.28,y_pass_rate:100,y_wgt_val:21.97,passRate:49.89,total:566.35,coalName:"主焦18110",type:"精煤"},{Mt_wgt_val:7,Ad_pass_rate:100,Ad_wgt_val:9.59,Vdaf_pass_rate:100,Vdaf_wgt_val:34.67,Std_pass_rate:100,Std_wgt_val:.6,g_pass_rate:100,g_wgt_val:89,y_pass_rate:"-",y_wgt_val:19.5,passRate:100,total:219.78,coalName:"蒙古1/3焦煤",type:"精煤"}]}},{name:"蒙西焦化厂",data:{from:"2024-2-26",to:"2024-3-25",purchaseType:"总量",coalType:[],passRate:0,total:0,details:[]}}],po=async t=>{const a=uo(Lt(t,!1),"1000px","500px"),o=ho;try{const n=new fa({styles:{paragraphStyles:[{id:"bodyContent",name:"bodyContent",quickFormat:!0,run:{color:"000000",italics:!1},paragraph:{indent:{firstLine:360},spacing:{line:276,before:144,after:72}}},{id:"tableHeaderStyle",name:"Table Header Style",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{font:"微软雅黑",size:20,bold:!0}},{id:"table2HeaderStyle",name:"Table Header Style",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{font:"微软雅黑",size:18,bold:!0}},{id:"tableBoldStyle",name:"Table Header Style",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{font:"微软雅黑",size:20,bold:!0}},{id:"tablered",name:"Table Header Style",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{font:"微软雅黑",size:20,bold:!0,color:"#FF0000"}},{id:"tablegreen",name:"Table Header Style",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{font:"微软雅黑",size:20,bold:!0,color:"#00BB00"}},{id:"tableblue",name:"Table Header Style",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{font:"微软雅黑",size:20,bold:!0,color:"#0066CC"}},{id:"table2green",name:"Table Header Style",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{font:"微软雅黑",size:18,bold:!0,color:"#00BB00"}},{id:"table2",name:"Table Header Style",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{font:"微软雅黑",size:18}},{id:"table2bold",name:"Table Header Style",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{font:"微软雅黑",size:18,bold:!0}},{id:"table2blue",name:"Table Header Style",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{font:"微软雅黑",size:18,bold:!0,color:"#0066CC"}},{id:"table2red",name:"Table Header Style",basedOn:"Normal",next:"Normal",quickFormat:!0,run:{font:"微软雅黑",size:18,bold:!0,color:"#FF0000"}}]},sections:[{properties:{page:{size:{orientation:ya.LANDSCAPE}}},children:[new k({alignment:C.CENTER,children:[new at({text:"原料煤采购报告",bold:!0,font:{eastAsia:"微软雅黑"},size:44})]}),new k({style:"firstTitleStyle",spacing:{before:500},children:[new at({text:"一、测试图表",bold:!0})]}),new k({alignment:C.CENTER,children:[new ba({data:a,transformation:{width:800,height:400}}),new _a]}),mo(o)]}]}),s=await wa.toBlob(n),c=document.createElement("a");c.href=URL.createObjectURL(s),c.download="测试采购报告.docx",document.body.appendChild(c),c.click(),document.body.removeChild(c),j.success("导出成功！")}catch{j.error("导出失败！")}},go=()=>{const[t,a]=r.useState(null);return r.useEffect(()=>{const o=[],n=[],s=[];for(let c=0;c<100;c++)o.push("A"+c),n.push((Math.sin(c/5)*(c/5-10)+c/6)*5),s.push((Math.cos(c/5)*(c/5-10)+c/6)*5);a({xAxisData:o,data1:n,data2:s})},[]),e(U,{children:e(ve,{title:"word导出-Echarts图片",extra:e(N,{type:"primary",onClick:()=>po(t),children:"导出"}),children:t&&e(va,{option:Lt(t,!0),notMerge:!0,style:{height:"32rem",width:"100%"}})})})},{Title:Fe,Paragraph:De,Text:Oe,Link:Qo}=O;function fo(){let t=new Date,a=t.getFullYear(),o=t.getMonth()+1>9?t.getMonth()+1:"0"+(t.getMonth()+1),n=t.getDate()>9?t.getDate():"0"+t.getDate();return a+"-"+o+"-"+n}function yo(){const t=r.useRef(null),a=r.useRef(null),o=r.useRef(null);function n(){var c,l;const s=t.current;if(s){s.width=300,s.height=200;const u=s.getContext("2d");if(u){u.font="30px Verdana",u.fillStyle="rgba(0,0,0,.3)",u.rotate(.2),u.fillText(fo(),30,30);const h=s.toDataURL("image/png"),m=a.current;m&&((c=o.current)==null||c.disconnect(),m.setAttribute("style",`background-image:url("${h}")`),(l=o.current)==null||l.observe(m,{attributes:!0}))}}}return r.useEffect(()=>{n()},[]),r.useEffect(()=>{const s=new MutationObserver(l=>{for(const u of l)u.target===a.current&&n()});o.current=s;const c=a.current;return c&&s.observe(c,{attributes:!0}),()=>{s.disconnect()}},[]),y(U,{children:[e("canvas",{ref:t,style:{display:"none"}}),e(ve,{ref:a,children:y(O,{children:[e(Fe,{children:"写点内容测试水印"}),e(De,{children:"In the process of internal desktop applications development, many different design specs and implementations would be involved, which might cause designers and developers difficulties and duplication and reduce the efficiency of development."}),e(Fe,{children:"写点内容测试水印"}),y(De,{children:["After massive project practice and summaries, Ant Design, a design language for background applications, is refined by Ant UED Team, which aims to"," ",e(Oe,{strong:!0,children:"uniform the user interface specs for internal background projects, lower the unnecessary cost of design differences and implementation and liberate the resources of design and front-end development"}),"."]}),e(Fe,{children:"写点内容测试水印"}),y(De,{children:["We supply a series of design principles, practical patterns and high quality design resources (",e(Oe,{code:!0,children:"Sketch"})," and ",e(Oe,{code:!0,children:"Axure"}),"), to help people create their product prototypes beautifully and efficiently."]})]})})]})}const bo="/my-react-tools/assets/login_bg-c0a37a52.webp",Te="0, 255, 0",{Paragraph:_o}=O,{Header:wo,Sider:vo,Content:Co}=H,ko={textAlign:"center",backgroundColor:"#fff"},xo={textAlign:"center",color:"#fff",backgroundColor:"#fff"},So={color:"#fff",backgroundColor:"#fff"},To={borderRadius:8,overflow:"hidden",width:"calc(100% - 8px)",maxWidth:"calc(100% - 8px)"},Eo=(t,a=3e3)=>{let o=0;return(...n)=>{const s=+new Date;s-o>a&&(o=s,t.apply(void 0,n))}},No=t=>{let a;const o=bo,n=1e3,s=1e3,c=r.useRef(null),l=r.useRef(null),u=r.useRef(null),h=r.useRef(null),m=r.useRef([]),[d,b]=r.useState(!1),[i,p]=r.useState([]),_=()=>{var I;p([]),m.current=[];const E=(I=l==null?void 0:l.current)==null?void 0:I.getContext("2d");E&&E.clearRect(0,0,n,s)};function T(E,I=!0){return E}const g=E=>{clearTimeout(a),a=setTimeout(()=>{var le;let I=E.offsetX,M=E.offsetY;const D=i.findIndex(G=>{Math.abs(T(G[0],!1)-I)<10&&Math.abs(T(G[1],!1)-M)<10});if(D>0){console.error("请连接起点");return}D===0&&(I=T(i[0][0],!1),M=T(i[0][1],!1));const L=(le=l==null?void 0:l.current)==null?void 0:le.getContext("2d");if(L){L.fillStyle=`rgba(${Te}, 1)`,L.fillRect(I-3,M-3,6,6);let G;(G=i[i.length-1])&&(L.strokeStyle=`rgba(${Te}, 1)`,L.beginPath(),L.moveTo(T(G[0],!1),T(G[1],!1)),L.lineTo(I,M),L.stroke(),L.closePath())}p([...i,[T(I),T(M)]])},200)},f=()=>{var I;const E=(I=l==null?void 0:l.current)==null?void 0:I.getContext("2d");E&&(E.clearRect(0,0,n,s),m.current.forEach(M=>{const{points:D}=M;E.beginPath(),E.fillStyle=`rgba(${Te}, 1)`,D.forEach((L,le)=>{const G=T(L[0],!1),$e=T(L[1],!1);E.fillRect(G-3,$e-3,6,6),le===0?E.moveTo(G,$e):E.lineTo(G,$e)}),E.stroke(),E.fillStyle=`rgba(${Te}, .5)`,E.fill(),E.closePath()}))},v=()=>{if(clearTimeout(a),i.length<3){b(!1),p([]);return}JSON.stringify(i[0])!==JSON.stringify(i[i.length-1])&&i.push(i[0]),m.current.push({key:new Date().getTime(),points:i}),f(),b(!1),p([])};let S=null;const $=Eo(E=>{const I=l==null?void 0:l.current;if(I){I.style.cursor="default";const M=E.offsetX,D=E.offsetY;S&&(S[0]=T(M),S[1]=T(D),f())}},10),B=E=>{const I=T(E.offsetX),M=T(E.offsetY);for(let D=0;D<m.current.length;D++){const{points:L}=m.current[D];if(S=L.find(le=>Math.abs(le[0]-I)<20&&Math.abs(le[1]-M)<20),S)break}},V=()=>{S=null},re=()=>{var I;const E=(I=c==null?void 0:c.current)==null?void 0:I.getContext("2d");if(E){const M=new Image;M.src=o,M.onload=function(){E.clearRect(0,0,n,s);let D=M.width,L=M.height;u.current={width:D,height:L},(M.width>n||M.height>s)&&(h.current=M.width>M.height?M.width/n:M.height/s,D=M.width/h.current,L=M.height/h.current),c!=null&&c.current&&(l!=null&&l.current)&&(c.current.width=l.current.width=D,c.current.height=l.current.height=L),E.drawImage(M,0,0,D,L),_()},M.onerror=()=>{console.log("图片加载失败")}}};return r.useEffect(()=>{re()},[]),e(ve,{children:y(H,{style:To,children:[y(H,{children:[e(wo,{style:ko,children:y(z,{children:[e(N,{type:"primary",disabled:d,onClick:()=>{b(!0)},children:"点击新建/编辑区域，双击保存"}),e(N,{type:"default",danger:!0,onClick:()=>{_()},children:"清除"})]})}),e(Co,{style:xo,children:y("div",{className:"canvas-wrapper",children:[e("canvas",{ref:c,id:"canvas-1",children:"Canvas not supported"}),e("canvas",{ref:l,id:"canvas-2",onClick:E=>{d&&g(E.nativeEvent)},onDoubleClick:E=>{d&&v()},onMouseMove:E=>{d&&$(E.nativeEvent)},onMouseDown:E=>{d&&B(E.nativeEvent)},onMouseUp:E=>{d&&V()},children:"Canvas not supported"})]})})]}),e(vo,{width:"25%",style:So,children:e("div",{className:"canvas-info",children:e(_o,{children:m.current.map(E=>e("pre",{children:JSON.stringify(E)}))})})})]})})},Ro=()=>{const{pathname:t}=ye();return e(Ca,{status:"404",title:"404",subTitle:`页面不存在, 当前路由: ${t}`,extra:e(N,{type:"primary",children:e(He,{to:"/",children:"返回首页"})})})};const Mo=r.forwardRef((t,a)=>{const o="MdEditorDraft",n=r.useRef(null),s=r.useRef(),{height:c=600,value:l="",onChange:u=ne,contentType:h="markdown"}=t,{settings:{theme:m}}=r.useContext(ae);r.useImperativeHandle(a,()=>({editor:s.current,container:n.current||void 0,getMarkdown:()=>{var i;return((i=s.current)==null?void 0:i.getMarkdown())||""},getHTML:()=>{var i;return((i=s.current)==null?void 0:i.getHTML())||""},clearDraft:()=>{localStorage.removeItem(o)},setMarkdown:i=>{var p;(p=s.current)==null||p.setMarkdown(i)}}),[s.current,n.current]),ge(()=>{console.log("is forucs",s.current.getSelection())},[l]);const d=()=>new ka({initialValue:l,height:`${c}px`,initialEditType:"markdown",previewStyle:"vertical",plugins:[xa],language:"zh-CN",previewHighlight:!0,frontMatter:!0,extendedAutolinks:!0,el:n.current,hideModeSwitch:!0,theme:m==="dark"?"dark":void 0}),b=Ja(i=>{var T,g;const _=h==="markdown"?((T=s.current)==null?void 0:T.getMarkdown())||"":((g=s.current)==null?void 0:g.getHTML())||"";u(_,i)},500);return r.useEffect(()=>{var _;s.current=d(),s.current.addHook("addImageBlobHook",(T,g,f)=>{const v=document.getElementById("toastuiAltTextInput"),S=(v==null?void 0:v.value)||"image",$=new FileReader;$.onload=B=>{var re;const V=(re=B.target)==null?void 0:re.result;console.log("Base64 encoded string:",V),g(V,S)},$.readAsDataURL(T)}),s.current.eventEmitter.listen("change",b);let i=setInterval(()=>{if(!s.current)return;const T=s.current.getMarkdown();localStorage.setItem(o,T),console.log("已保存到草稿箱!")},15*1e3);const p=localStorage.getItem(o);return p&&((_=s.current)==null||_.setMarkdown(p),console.log("已从草稿箱加载数据!")),()=>{i&&clearInterval(i)}},[]),ge(()=>{var p,_;const i=(p=s.current)==null?void 0:p.getMarkdown();(_=s.current)==null||_.destroy(),s.current=d(),s.current.setMarkdown(i||"")},[m]),ge(()=>{var i;(i=s.current)==null||i.setMarkdown(l)},[l]),e("div",{style:{backgroundColor:"#fff"},ref:n})}),$t=J.memo(Mo,(t,a)=>{var o,n;return((o=t.value)==null?void 0:o.length)!==((n=a.value)==null?void 0:n.length)||t.value!==a.value}),Io=()=>{const[t]=w.useForm(),a=r.useRef(null),o=ue(),n="articleDraft",{loading:s,run:c}=Y(dn,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{var d;(d=a.current)==null||d.clearDraft(),o("/article/list")},200)}),{data:l,loading:u}=Y(Je);r.useEffect(()=>{const d=W.getObject(n)||{},b={status:200,comment_control:[1,2],description:"",source:"",author:"Moto",sort_value:100};t.setFieldsValue({...b,...d})},[]);const h=async(d=!1)=>{var i;const b=await t.validateFields();b.content=((i=a.current)==null?void 0:i.getHTML())||"",b.is_draft=d?1:0,console.log("formData",b),c(b)},m=d=>(console.log("Upload event:",d),Array.isArray(d)?d:d&&d.fileList);return y(ce,{children:[e(O.Title,{level:3,children:"发布文章"}),e(Z,{}),y(w,{form:t,name:"createForm",labelCol:{span:2},children:[e(w.Item,{name:"title",label:"文章标题",rules:[{required:!0,message:"请输入标题"}],children:e(A,{})}),e(w.Item,{label:"封面",name:"cover",getValueFromEvent:m,valuePropName:"fileList",children:e(vt,{maxCount:1,listType:"picture-card",accept:"image/*",children:y("div",{children:[e(Ie,{}),e("div",{style:{marginTop:8},children:"选择图片"})]})})}),e(w.Item,{label:"标签",name:"tags",children:e(Ke,{mode:"tags",placeholder:"文章标签",style:{width:400}})}),e(w.Item,{label:"作者",name:"author",rules:[{required:!0,message:"请输入作者"}],children:e(A,{style:{width:200}})}),e(w.Item,{label:"简介",name:"description",children:e(A.TextArea,{rows:3})}),e(w.Item,{label:"内容",name:"markdown_content",children:e($t,{ref:a})}),e(w.Item,{name:"category_id",label:"分类",rules:[{required:!0,message:"请选择分类!"}],children:e(Ae,{dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"请选择分类",fieldNames:{label:"name",value:"id"},allowClear:!0,treeDefaultExpandAll:!0,loading:u,treeData:l})}),e(w.Item,{name:"status",label:"状态",initialValue:200,children:y(F.Group,{children:[e(F,{value:200,children:"显示"}),e(F,{value:900,children:"不显示"})]})}),e(w.Item,{name:"comment_control",label:"评论控制",initialValue:[1,2],children:e(Ye.Group,{options:[{label:"显示评论",value:1},{label:"允许评论",value:2}]})}),e(w.Item,{label:"来源",name:"source",children:e(A,{style:{width:200}})}),e(w.Item,{label:"排序",name:"sort_value",children:e(A,{style:{width:200}})}),e(w.Item,{wrapperCol:{offset:3},children:y(z,{children:[e(N,{icon:e(Ct,{}),onClick:()=>h(),loading:s,type:"primary",children:"发布文章"}),e(N,{icon:e(We,{}),loading:s,onClick:()=>h(!0),children:"保存为草稿"})]})})]})]})},Ao=()=>{const[t]=w.useForm(),a=r.useRef(null),o=ue(),n=Sa();console.log("routeParams",n);const{loading:s,run:c}=Y(un,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{var i;(i=a.current)==null||i.clearDraft(),o("/article/list")},200)}),{data:l,loading:u}=Y(()=>ln({id:Number(n.id)}),{onSuccess:i=>{var v;const{content:p,comment_control:_,cover:T,...g}=i,f=[];[1,2].map(S=>_&S?f.push(S):void 0),g.markdown_content=p.markdown_content,t.setFieldsValue({...g,comment_control:f}),(v=a.current)==null||v.setMarkdown(p.markdown_content)}}),{data:h,loading:m}=Y(Je),d=async(i=!1)=>{var _;const p=await t.validateFields();p.content=((_=a.current)==null?void 0:_.getHTML())||"",p.is_draft=i?1:0,p.id=l.id,console.log("formData",p),c(p)},b=i=>(console.log("Upload event:",i),Array.isArray(i)?i:i&&i.fileList);return y(ce,{children:[e(O.Title,{level:3,children:"发布文章"}),e(Z,{}),y(w,{form:t,name:"createForm",labelCol:{span:2},children:[e(w.Item,{name:"title",label:"文章标题",rules:[{required:!0,message:"请输入标题"}],children:e(A,{})}),e(w.Item,{label:"封面",name:"cover",getValueFromEvent:b,valuePropName:"fileList",children:e(vt,{maxCount:1,listType:"picture-card",accept:"image/*",children:y("div",{children:[e(Ie,{}),e("div",{style:{marginTop:8},children:"选择图片"})]})})}),e(w.Item,{label:"标签",name:"tags",children:e(Ke,{mode:"tags",placeholder:"文章标签",style:{width:400}})}),e(w.Item,{label:"作者",name:"author",rules:[{required:!0,message:"请输入作者"}],children:e(A,{style:{width:200}})}),e(w.Item,{label:"简介",name:"description",children:e(A.TextArea,{rows:3})}),e(w.Item,{label:"内容",name:"markdown_content",children:e($t,{ref:a})}),e(w.Item,{name:"category_id",label:"分类",rules:[{required:!0,message:"请选择分类!"}],children:e(Ae,{dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"请选择分类",fieldNames:{label:"name",value:"id"},allowClear:!0,treeDefaultExpandAll:!0,loading:m,treeData:h})}),e(w.Item,{name:"status",label:"状态",initialValue:200,children:y(F.Group,{children:[e(F,{value:200,children:"显示"}),e(F,{value:900,children:"不显示"})]})}),e(w.Item,{name:"comment_control",label:"评论控制",initialValue:[1,2],children:e(Ye.Group,{options:[{label:"显示评论",value:1},{label:"允许评论",value:2}]})}),e(w.Item,{label:"来源",name:"source",children:e(A,{style:{width:200}})}),e(w.Item,{label:"排序",name:"sort_value",children:e(A,{style:{width:200}})}),e(w.Item,{wrapperCol:{offset:3},children:y(z,{children:[e(N,{icon:e(Ct,{}),onClick:()=>d(),loading:s,type:"primary",children:"更新"}),e(N,{icon:e(We,{}),loading:s,onClick:()=>d(!0),children:"保存为草稿"})]})})]})]})},Po=()=>{const{data:t,loading:a,refresh:o}=Y(Je),[n]=w.useForm(),[s,c]=r.useState(),{loading:l,run:u}=Y(mn,{manual:!0,onSuccess:()=>o()}),{loading:h,run:m}=Y(hn,{manual:!0,onSuccess:()=>o()}),d=(p,_)=>{const T=_.node;c(T),n.setFieldsValue(T)},b=async()=>{const p=await n.validateFields();u(p)},i=async()=>{const p=await n.validateFields();m({...p,id:s.id})};return y(ce,{children:[e(O.Title,{level:3,children:"分类管理"}),e(Z,{}),e(ht,{spinning:a,tip:"正在加载分类数据, 请稍后...",children:y(Ge,{gutter:24,children:[e(we,{span:8,children:e(Ta,{blockNode:!0,defaultExpandAll:!0,onSelect:d,fieldNames:{title:"name",key:"id",children:"children"},treeData:t})}),e(we,{span:16,children:y(w,{name:"categoryForm",form:n,labelCol:{span:4},initialValues:{sort_value:100},children:[e(w.Item,{label:"所属分类",name:"parent_id",rules:[{required:!0,message:"清选择所属分类"}],children:e(Ae,{fieldNames:{label:"name",value:"id"},treeData:[{name:"一级分类",id:0},...t||[]],dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"请选择所属分类",allowClear:!0})}),e(w.Item,{label:"分类名称",name:"name",rules:[{required:!0,message:"请输入分类名称"}],children:e(A,{style:{width:200},placeholder:"请输入分类名称"})}),e(w.Item,{label:"排序",name:"sort_value",children:e(A,{type:"number",style:{width:200}})}),e(w.Item,{name:"status",label:"状态",initialValue:200,children:y(F.Group,{children:[e(F,{value:200,children:"显示"}),e(F,{value:900,children:"不显示"})]})}),e(w.Item,{wrapperCol:{offset:3},children:y(z,{children:[e(N,{icon:e(We,{}),disabled:s===void 0,onClick:i,loading:h,type:"primary",children:"保存修改"}),e(N,{icon:e(Ie,{}),loading:l,onClick:b,children:"添加为新分类"})]})})]})})]})})]})},Lo=()=>{const{userInfo:t,setUserInfo:a}=r.useContext(se),o=n=>{a({...t,roles:[n]})};return y(ce,{children:[y(O.Text,{children:["当前权限: ",JSON.stringify(t==null?void 0:t.roles)]}),e(Z,{}),y(N.Group,{children:[e(N,{type:"primary",onClick:()=>o("admin"),children:"切换为 Admin"}),e(N,{onClick:()=>o("guest"),children:"切换为 Guest"})]})]})},dt=({children:t,role:a})=>{const{userInfo:o}=r.useContext(se);return Tt(a,o)?e(U,{children:t}):null},$o=()=>{const{userInfo:t,setUserInfo:a}=r.useContext(se),o=n=>{a({...t,roles:[n]})};return y(ce,{children:[y(O.Text,{children:["当前权限: ",JSON.stringify(t==null?void 0:t.roles)]}),e(Z,{}),y(N.Group,{children:[e(N,{type:"primary",onClick:()=>o("admin"),children:"切换为 Admin"}),e(N,{onClick:()=>o("guest"),children:"切换为 Guest"})]}),e(Z,{}),y(z,{children:[e(dt,{role:"admin",children:e(N,{type:"primary",children:"Admin menu"})}),e(dt,{role:"guest",children:e(N,{children:"Guest menu"})})]})]})},Fo=r.lazy(()=>ke(()=>import("./index-7effd2b2.js"),["assets/index-7effd2b2.js","assets/vendor-130bbd52.js","assets/vendor-79dc8b22.css"])),it=r.lazy(()=>ke(()=>import("./index-9110db5a.js"),["assets/index-9110db5a.js","assets/vendor-130bbd52.js","assets/vendor-79dc8b22.css"])),Do=r.lazy(()=>ke(()=>import("./index-d3acc22c.js"),["assets/index-d3acc22c.js","assets/vendor-130bbd52.js","assets/vendor-79dc8b22.css","assets/index-8728ff57.css"])),Oo=r.lazy(()=>ke(()=>import("./index-1711c12b.js"),["assets/index-1711c12b.js","assets/vendor-130bbd52.js","assets/vendor-79dc8b22.css","assets/index-19ead691.css"])),Ho=r.lazy(()=>ke(()=>import("./index-e31b364d.js"),["assets/index-e31b364d.js","assets/vendor-130bbd52.js","assets/vendor-79dc8b22.css","assets/index-c11d3a46.css"])),he=({children:t})=>e(J.Suspense,{fallback:e(Xe,{}),children:t});function Uo(){return[{path:"/login",element:e(he,{children:e(Do,{})})},{path:"/",element:e(Zn,{}),children:[{path:"/",element:e(Ga,{to:"/dashboard"})},{path:"/dashboard",element:e(he,{children:e(Oo,{})})},{path:"/user",children:[{index:!0,element:e(lt,{})},{path:"/user/center/index",element:e(lt,{})},{path:"/user/center/update",element:e(eo,{})}]},{path:"/replica",children:[{path:"/replica/research",element:e(io,{})},{path:"/replica/exportWord",element:e(go,{})},{path:"/replica/watermark",element:e(yo,{})},{path:"/replica/dimension",element:e(No,{})}]},{path:"/example",children:[{path:"/example/userList",element:e(so,{})},{path:"/example/tabs/manage",element:e(he,{children:e(Fo,{})})},{path:"/example/permission",children:[{path:"/example/permission/menu",element:e(Lo,{})},{path:"/example/permission/button",element:e($o,{})}]}]},{path:"/article",children:[{index:!0,element:e(he,{children:e(it,{})})},{path:"/article/list",element:e(he,{children:e(it,{})})},{path:"/article/category",element:e(Po,{})},{path:"/article/create",element:e(Io,{})},{path:"/article/update/:id",element:e(Ao,{})}]},{path:"/blank",element:e(Se,{})},{path:"/badge/dot",element:e(Se,{title:"红点徽标"})},{path:"/badge/count",element:e(Se,{title:"数字徽标"})},{path:X,element:e(he,{children:e(Ho,{})})},{path:"/multilevel/menu/2/3",element:e(Se,{title:"三级菜单"})},{path:"*",element:e(Ro,{})}]}]}const Vo=Ea(Uo(),{basename:"/my-react-tools/"});function Bo(){return r.useEffect(()=>{},[]),e(ja,{children:e(Na,{router:Vo})})}function ut(t){const a=JSON.stringify({type:"JWT",alg:"HS256"}),o=Number((new Date().getTime()/1e3).toFixed(0)),n=JSON.stringify({iss:"https://github.com/MTABBJ",sub:"react-admin",iat:o,exp:o+86400*14,data:t}),s="H_97UyQUOmURnZdDwI0khuAt4Cmg";return`${nt(a)}.${nt(n)}.${s}`}R.mock(/api\/login/,"post",({body:t})=>{const{username:a,password:o}=JSON.parse(t);return a==="admin"?o!=="123456"?{code:-1,message:"密码错误"}:{code:0,message:"登录成功",data:{token:ut({uid:1})}}:{code:0,message:"登录成功",data:{token:ut({uid:K.Random.natural(2,1e4)})}}});R.setup({timeout:100});R.mock(/api\/user\/info/,"get",t=>({code:0,message:"ok",data:{id:1,username:"admin",nickname:"Moto",avatar:"./icon.svg",password:"",gender:K.Random.natural(1,2),email:"136xxxxxxxx@163.com",mobile:"136xxxxxxxx",roles:["admin"]}}));R.mock(/api\/user\/logout/,"post",t=>({code:0,message:"退出成功"}));R.mock(/api\/user\/list/,"get",t=>{const a=new URLSearchParams(t.url);let o=Number(a.has("pageSize")?a.get("pageSize"):10);const n={code:0,message:"ok",data:{total:100,[`list|${o}`]:[{"id|+1":o,username:"@first@last",nickname:"@cname",avatar:()=>K.Random.dataImage("200x200"),email:"@email",mobile:()=>R.mock(/^1[3456789]\d{9}$/).replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2"),"gender|1-2":0,create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return R.mock(n)});R.mock(/api\/user\/create/,"post",t=>({code:0,message:"创建成功",data:{id:K.Random.natural(100,9999)}}));R.mock(/api\/user\/update/,"post",t=>({code:0,message:"更新成功"}));R.mock(/api\/user\/delete/,"post",t=>({code:0,message:"删除成功"}));R.setup({timeout:100});R.mock(/api\/article\/detail/,"get",t=>(console.log("🚀 ~ file: article.ts:7 ~ Mock.mock ~ options:",t),{code:0,message:"ok",data:{id:1,title:"主题",description:"Moto",author:"Moto",tags:[1,2],content:{markdown_content:`# 内容标题\r
 正文`},sort_value:100,comment_control:3,create_time:K.Random.datetime()}}));R.mock(/api\/article\/list/,"get",t=>{const a=new URLSearchParams(t.url);let o=Number(a.has("pageSize")?a.get("pageSize"):10);const n={code:0,message:"ok",data:{total:100,[`list|${o}`]:[{"id|+1":o,author:"@first@last",title:()=>R.Random.ctitle(5,20),description:"@cname",cover:()=>K.Random.dataImage("480x270","封面"),content:"@email",create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return R.mock(n)});R.mock(/api\/article\/create/,"post",t=>({code:0,message:"创建成功",data:{id:K.Random.natural(100,9999)}}));R.mock(/api\/article\/update/,"post",t=>({code:0,message:"更新成功"}));R.mock(/api\/article\/delete/,"post",t=>({code:0,message:"删除成功"}));R.setup({timeout:100});R.mock(/api\/todo\/list/,"get",t=>{const a={code:0,message:"",data:{total:3,list:[{id:st(100,1e9),name:"全局搜索",status:_e.incomplete,create_time:"2023-04-20",update_time:"2023-04-20"},{id:st(100,1e9),name:"多tab布局支持",status:_e.completed,create_time:"2023-04-15",update_time:"2023-04-215"},{id:1,name:"这是一个todo例子",status:_e.completed,create_time:"2023-04-10",update_time:"2023-04-10"}]}};return R.mock(a)});R.mock(/api\/todo\/create/,"post",t=>{const a=JSON.parse(t.body);return{code:0,message:"",data:{id:K.Random.natural(100,9999),name:a.name,status:_e.incomplete,create_time:K.Random.now(),update_time:K.Random.now()}}});R.mock(/api\/todo\/update/,t=>({code:0,message:""}));R.mock(/api\/todo\/changeStatus/,"post",t=>({code:0,message:""}));R.mock(/api\/todo\/delete/,"post",t=>({code:0,message:""}));R.setup({timeout:100});R.mock(/api\/category\/treeList/,"get",t=>(console.log("🚀 ~ file: article.ts:7 ~ Mock.mock ~ options:",t),{code:0,message:"ok",data:[{id:82,name:"PHP",parent_id:0,sort_value:10,status:10,children:[{id:79,name:"Yii2.0",parent_id:82,sort_value:11,status:10},{id:95,name:"Yii1.1",parent_id:82,sort_value:12,status:10},{id:93,name:"函数",parent_id:82,sort_value:15,status:10}]},{id:84,name:"数据库",parent_id:0,sort_value:20,status:10,children:[{id:85,name:"mysql",parent_id:84,sort_value:21,status:10},{id:92,name:"redis",parent_id:84,sort_value:22,status:10}]},{id:86,name:"Linux",parent_id:0,sort_value:30,status:10},{id:81,name:"Javascript",parent_id:0,sort_value:40,status:10},{id:91,name:"Golang笔记",parent_id:0,sort_value:45,status:10},{id:100,name:"C语言",parent_id:0,sort_value:46,status:10},{id:94,name:"数据结构与算法",parent_id:0,sort_value:47,status:10,children:[{id:99,name:"算法",parent_id:94,sort_value:45,status:10},{id:96,name:"链表",parent_id:94,sort_value:47,status:10},{id:97,name:"hash",parent_id:94,sort_value:48,status:10},{id:98,name:"二叉树",parent_id:94,sort_value:49,status:10}]},{id:101,name:"正则表达式",parent_id:0,sort_value:48,status:10},{id:80,name:"资源分享",parent_id:0,sort_value:50,status:10,children:[{id:89,name:"软件教程",parent_id:80,sort_value:52,status:10},{id:90,name:"文章分享",parent_id:80,sort_value:53,status:10}]},{id:88,name:"其他",parent_id:0,sort_value:60,status:10}]}));R.mock(/api\/category\/create/,"post",t=>({code:0,message:"创建分类成功",data:{id:K.Random.natural(100,9999)}}));R.mock(/api\/category\/update/,"post",t=>({code:0,message:"更新分类成功"}));Ra.createRoot(document.getElementById("root")).render(e(Bo,{}));export{ce as C,Wa as D,U as F,Le as M,$n as R,ae as S,_e as T,e as a,oo as b,ee as c,W as d,qo as e,Xo as f,jo as g,fe as h,Go as i,y as j,Jo as k,Wo as l,Ko as m,ne as n,te as o,Yo as p,st as r,ao as u,ct as v};
