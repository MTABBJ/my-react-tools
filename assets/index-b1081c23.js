import{j as Me,r as a,C as yt,z as bt,t as Z,u as Ye,a as X,b as Y,m as H,d as kt,S as Je,n as We,c as E,B as S,e as Qe,R as D,f as ne,g as le,h as ue,L as Ce,H as vt,i as Ct,k as xt,T as Ie,l as he,o as St,F as Ze,p as Xe,q as Tt,s as R,G as Mt,v as L,w as It,x as wt,y as te,A as we,U as et,D as V,E as xe,P as Pt,I as _t,J as v,K as oe,M as Lt,N as P,O as ae,Q as Nt,V as At,W as Rt,X as tt,Y as Ft,Z as $t,_ as Et,$ as Ut,a0 as I,a1 as F,a2 as ye,a3 as ot,a4 as Ot,a5 as be,a6 as Bt,a7 as Pe,a8 as Fe,a9 as _e,aa as Dt,ab as Le,ac as de,ad as Ht,ae as zt,af as $e,ag as Ee,ah as Vt,ai as jt,aj as qt,ak as Kt,al as Ue,am as Oe,an as Gt,ao as Yt,ap as Jt,aq as Wt,ar as ct,as as nt,at as Ne,au as Qt,av as Zt,aw as Xt,ax as eo,ay as M,az as $,aA as Be,aB as to}from"./vendor-6a6a55f7.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const i of d.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function c(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerPolicy&&(d.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?d.credentials="include":s.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(s){if(s.ep)return;s.ep=!0;const d=c(s);fetch(s.href,d)}})();const N=Me.Fragment,e=Me.jsx,b=Me.jsxs,j={pageTitle:"后台管理系统模板",pageTitlePrefix:"后台管理",tokenKey:"Authorization",apiBaseUrl:"https://xstnet.github.io/my-react-tools/api",iconFontUrl:"//at.alicdn.com/t/c/font_4623264_ofmo8z76bao.js"};function oo(t,o){localStorage.setItem(t,typeof o=="object"?JSON.stringify(o):o)}function co(t){localStorage.setItem(j.tokenKey,typeof t=="object"?JSON.stringify(t):t)}function st(t){return localStorage.getItem(t)}function no(t){const o=localStorage.getItem(t);if(o!==null)return Number(o)}function so(t){const o=localStorage.getItem(t);if(o!==null)return o==="true"}function ao(t){const o=localStorage.getItem(t);if(o!==null)return JSON.parse(o)}function ro(t){return st(t)!==null}function lo(t){localStorage.removeItem(t)}function io(){localStorage.removeItem(j.tokenKey)}function uo(){localStorage.clear()}const B={set:oo,setToken:co,has:ro,getString:st,getObject:ao,getBoolean:so,getNumber:no,remove:lo,removeToken:io,clear:uo},at=()=>{const[t,o]=a.useState(window.matchMedia("(prefers-color-scheme: dark)").matches);return a.useEffect(()=>{const n=s=>{console.log("chage",s.matches),s.matches?o(!0):o(!1)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",n),()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",n)}},[]),[t?"dark":"light"]},mo=void 0,ho=a.createContext(mo),po=({children:t})=>{const{settings:{primaryColor:o,theme:c,compactMode:n,followSystemTheme:s}}=a.useContext(K),[d]=at(),i={},m=()=>{const h=[];return s?h.push(d==="light"?Z.defaultAlgorithm:Z.darkAlgorithm):h.push(c==="light"?Z.defaultAlgorithm:Z.darkAlgorithm),n&&h.push(Z.compactAlgorithm),h};return e(ho.Provider,{value:i,children:e(yt,{locale:bt,theme:{algorithm:m(),token:{colorPrimary:o},components:{Button:{borderRadius:4,borderRadiusSM:2},Modal:{borderRadius:4,borderRadiusOuter:2}}},children:t})})},go=void 0,K=a.createContext(go),fo=({children:t})=>{const o=a.useMemo(()=>({theme:"light",compactMode:!1,followSystemTheme:!1,fixedHeader:!0,fixedMenu:!0,showFooter:!0,multitabMode:!1,primaryColor:"#FDABCB",...B.getObject("settings")||{}}),[]),[c,n]=a.useState(o),s=a.useCallback(i=>{const m={...c,...i};n(m),B.set("settings",m)},[c]),d={settings:c,setSetting:s};return e(K.Provider,{value:d,children:e(po,{children:t})})},yo=void 0,J=a.createContext(yo),bo=({children:t})=>{const[o,c]=a.useState(!1),[n,{toggleFullscreen:s}]=Ye(document.body),[d,i]=a.useState(null),m=a.useMemo(()=>({isLogin:o,setIsLogin:c,userInfo:d,setUserInfo:i,fullScreen:n,setFullScreen:s}),[o,d,n]);return e(J.Provider,{value:m,children:e(fo,{children:t})})},ko="modulepreload",vo=function(t){return"/my-react-tools/"+t},De={},ie=function(o,c,n){if(!c||c.length===0)return o();const s=document.getElementsByTagName("link");return Promise.all(c.map(d=>{if(d=vo(d),d in De)return;De[d]=!0;const i=d.endsWith(".css"),m=i?'[rel="stylesheet"]':"";if(!!n)for(let l=s.length-1;l>=0;l--){const k=s[l];if(k.href===d&&(!i||k.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${m}`))return;const p=document.createElement("link");if(p.rel=i?"stylesheet":ko,i||(p.as="script",p.crossOrigin=""),p.href=d,document.head.appendChild(p),i)return new Promise((l,k)=>{p.addEventListener("load",l),p.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>o())},Co=({to:t})=>{const o=X();return a.useEffect(()=>{o(t)},[]),null};var Se=(t=>(t[t.success=0]="success",t[t.noLogin=-10001]="noLogin",t[t.loginExpired=-10002]="loginExpired",t))(Se||{}),rt=(t=>(t[t.male=1]="male",t[t.female=2]="female",t))(rt||{}),re=(t=>(t[t.incomplete=1]="incomplete",t[t.completed=2]="completed",t[t.deleted=10]="deleted",t))(re||{}),xo=(t=>(t.day="YYYY-MM-DD",t.second="YYYY-MM-DD HH:mm:ss",t.minute="YYYY-MM-DD HH:mm",t.hour="YYYY-MM-DD HH",t))(xo||{});function G(){}function He(t,o){return Math.floor(Math.random()*(o-t+1))+t}function dt(t,o){const{roles:c=[]}=o||{};return t?typeof t=="string"||typeof t=="number"?c.includes(t):Array.isArray(t)?t.some(n=>c.includes(n)):typeof t=="function"?t(o):!1:!0}function So(t,o){let c;return function(...n){clearTimeout(c),c=setTimeout(()=>{t(...n)},o)}}function To(t){var c;const{config:o}=t;console.group(`${(c=o.method)==null?void 0:c.toLocaleUpperCase()} ${o.url}`),console.log("Path:",o.url),console.log("Method:",o.method),console.log("Params:",o.params),console.log("Body:",o.data),console.log("StatusCode:",t.status),console.log("Response:",typeof t.data=="object"?Object.assign(Object.create(null),t.data):t.data),console.groupEnd()}const Mo=10*1e3;Y.defaults.baseURL=j.apiBaseUrl;Y.defaults.headers.post["Content-Type"]="application/json; charset=utf-8";Y.defaults.timeout=Mo;Y.interceptors.request.use(t=>(t.headers.Authorization=`Bearer ${B.getString(j.tokenKey)}`,t),t=>Promise.reject(t));Y.interceptors.response.use(t=>{To(t);const o=t.data;return typeof o.code!="number"?(H.error("系统错误",2),console.warn("api调用失败, 未正常返回数据, url:",t.config.url,"data:",o,"response:",t),Promise.reject(t)):o.code===0?(t.config.method==="post"&&typeof t.data.message=="string"&&t.data.message.length>0&&H.success(t.data.message),t):o.code===Se.noLogin?(H.error("您还没有登录, 即将跳转到登录页面, 请稍后..."),B.remove(j.tokenKey),location.reload(),Promise.reject(o)):o.code===Se.loginExpired?(H.error("登录已失效, 即将跳转到登录页面..."),B.remove(j.tokenKey),location.reload(),Promise.reject(o)):(H.error(o.message),Promise.reject(t))},t=>(typeof t.message=="string"&&t.message==="Network Error"?H.error("网络错误, 请稍后再试!"):H.error("请求失败, 请稍后再试"),console.log("Request error",t),Promise.reject(t)));const Io=(t,o,c)=>{const n=c||{};return n.params=o,Y.get(t,n).then(s=>s.data.data).catch(s=>Promise.reject(s))},wo=(t,o,c)=>Y.post(t,o,c).then(n=>n.data.data).catch(n=>Promise.reject(n)),Po=t=>Y.request(t),w={get:Io,post:wo,request:Po},Zc=t=>w.post("/login",t),_o=t=>w.get("/user/info",t),Lo=()=>w.post("/user/logout"),No=(t,o)=>w.get("/user/list",{...t,...o}),Ao=t=>w.post("/user/create",t),Ro=t=>w.post("/user/update",t),Fo=t=>w.post("/user/delete",t),Xc=(t,o)=>w.get("/article/list",{...t,...o}),$o=t=>w.get("/article/detail",t),Eo=t=>w.post("/article/create",t),Uo=t=>w.post("/article/update",t),en=t=>w.post("/article/delete",t),tn=t=>w.get("/todo/list",t),on=t=>w.post("/todo/changeStatus",t),cn=t=>w.post("/todo/delete",t),nn=t=>w.post("/todo/update",t),sn=t=>w.post("/todo/create",t),Ae=()=>w.get("/category/treeList"),Oo=t=>w.post("/category/create",t),Bo=t=>w.post("/category/update",t);function Do(t){const o=t.split(".")[1];if(o)try{return JSON.parse(kt(o))}catch(c){console.warn("Parse Token Error: ",c);return}}function ze(){var c;const t=B.getString(j.tokenKey);if(!t)return!1;const o=Do(t);return o!==void 0&&((c=o==null?void 0:o.data)==null?void 0:c.uid)>0&&o.exp>new Date().getTime()/1e3}const Re=({loading:t=!0,title:o="页面加载中",delay:c=50})=>{const{settings:{theme:n}}=a.useContext(K);return e(Je,{size:"large",spinning:t,tip:o,delay:c,wrapperClassName:`page-loading-spin-${n}`,children:e("div",{style:{height:"100%",width:"100%"}})})},Ho=()=>{const[t,o]=We.useNotification(),c=B.getBoolean("dontShowCompactModeNotify"),{setSetting:n,settings:{compactMode:s}}=a.useContext(K),d=()=>{const i=`open${Date.now()}`,m=b(E,{children:[e(S,{type:"link",size:"small",onClick:()=>t.destroy(),children:"不再提示"}),e(S,{type:"primary",size:"small",onClick:()=>{n({compactMode:!0}),t.destroy(i)},children:"开启"})]});t.info({message:"开启紧凑布局模式",description:"检测到您的屏幕尺寸过小, 是否开启紧凑布局模式? 或者您也可以选择在设置中手动开启",btn:m,key:i,onClose:()=>B.set("dontShowCompactModeNotify",!0)})};return a.useEffect(()=>{!c&&!s&&window.innerWidth<=1440&&d()},[]),o},zo=[{label:"控制台",icon:"icon-dashboard",path:"/dashboard",permission:"admin"},{label:"复刻页面",icon:"icon-link",path:"/replica",children:[{label:"市场行情",icon:"icon-link",path:"/replica/research"}]},{label:"测试页面",path:"/example",icon:"icon-all",children:[{label:"列表页",icon:"icon-list",path:"/example/userList",permission:["admin","guest"]},{label:"权限测试页",icon:"icon-list",path:"/example/permission",children:[{label:"菜单权限",icon:"icon-list",path:"/example/permission/menu"},{label:"按钮权限",icon:"icon-list",path:"/example/permission/button"}]},{label:"多级菜单",icon:"icon-list",path:"/multilevel/menu",children:[{label:"二级菜单",icon:"icon-list",path:"/multilevel/menu/2",children:[{label:"三级菜单",icon:"icon-list",path:"/multilevel/menu/2/3"}]}]},{label:"Tabs标签页",icon:"icon-lable",path:"/example/tabs",children:[{label:"标签管理",icon:"icon-lable",path:"/example/tabs/manage"}]},{label:"空白页",icon:"icon-square",path:"/blank"},{label:"404",icon:"icon-error",path:"/404"}]},{label:"徽标示例",path:"/badge",icon:"icon-lable",children:[{label:"红点徽标",icon:"icon-lable",badge:"dot",path:"/badge/dot"},{label:"数字徽标",icon:"icon-lable",badge:98,path:"/badge/count"}]},{path:"/article",label:"文章管理",icon:"icon-suggest",permission:"admin",children:[{path:"/article/list",label:"文章列表",icon:"icon-suggest"},{path:"/article/create",label:"发布文章",hideInMenu:!0,parent:"/article/list"},{path:"/article/update",label:"更新文章",hideInMenu:!0,parent:"/article/list"},{path:"/article/category",label:"分类管理",icon:"icon-category"}]},{path:"/iframe",label:"外部页面",icon:"icon-link",permission:"admin",children:[{path:"https://ant-design.antgroup.com/components/overview-cn/",label:"antd文档(内嵌)",icon:"icon-link",type:"iframe"},{path:"https://baidu.com",label:"百度",icon:"icon-link",type:"iframe"}]},{path:"/document",label:"文档",hideInMenu:!0,icon:"icon-link",children:[{path:"/document/start",label:"开始使用",icon:"icon-link"},{path:"/document/package.json",label:"Package文件说明",icon:"icon-link"}]},{path:"/user/center",label:"个人中心",icon:"icon-customer",permission:t=>t.roles.includes("admin"),children:[{path:"/user/center/index",label:"个人中心",icon:"icon-customer"},{path:"/user/center/update",label:"修改信息",icon:"icon-suggest"}]}],Vo=async t=>zo;function lt(t){return!!(typeof t.children>"u"||Array.isArray(t.children)&&t.children.length===0)}function ge(t){return ke(t)?!1:!!(typeof t.children<"u"&&Array.isArray(t.children)&&t.children.length>0)}function fe(t){return typeof t.path=="string"&&typeof t.label=="string"}function ke(t){return typeof t.type<"u"&&t.type==="group"}function jo(t){return typeof t.type<"u"&&t.type==="divider"}const qo=void 0,q=a.createContext(qo),Ko=({children:t})=>{const{userInfo:o}=a.useContext(J),[c,n]=a.useState([]),[s,d]=a.useState(!1);a.useEffect(()=>{async function p(){try{const l=await Vo(o);n([...l])}catch(l){console.warn("获取菜单数据失败",l)}}p()},[o]);const{mapPathToMenu:i,processedMenuList:m}=a.useMemo(()=>(()=>{const l=new Map,k=y=>{fe(y)&&(y.key=(y==null?void 0:y.key)||y.path);const{permission:T,...g}=y;return g},r=y=>y.map(g=>{var x;const{permission:f=void 0}=g;if(!dt(f,o))return null;const C=k(g);return(ge(C)||ke(C))&&(C.children=r(C.children||[]),!C.children||!((x=C.children)!=null&&x.length))?null:(fe(C)&&l.set(C.path,C),C)}).filter(g=>g);return{processedMenuList:r(c),mapPathToMenu:l}})(),[c]),h=a.useMemo(()=>({menuList:m,setMenuList:n,menuCollapsed:s,setMenuCollapsed:d,mapPathToMenu:i}),[c,s]);return c.length===0?e(q.Provider,{value:h,children:e(Re,{})}):e(q.Provider,{value:h,children:t})},Go={addTab:G,removeTab:G,tabs:[],openTab:G,hasTab:()=>!1,setTabs:G,activeTab:"",whiteList:[],tabEvent:Qe(),addTabWithNavigate:G},ve=a.createContext(Go),Yo=({children:t})=>{const[o,c]=a.useState([]),[n,s]=a.useState(""),d=a.useMemo(()=>Qe(),[]),i=X(),m=a.useCallback(()=>{const k=g=>{g&&g!==n&&s(g)},r=g=>o.findIndex(f=>f.key===g)>-1,u=(g,f=!0)=>{r(g.key)||c(C=>[...C,{...g}]),f&&n!==g.key&&k(g.key)};return{openTab:k,addTab:u,removeTab:g=>{const f=o.findIndex(x=>x.key===g);if(f===-1)return;const C=o[f===0?1:f-1];c(x=>x.filter(_=>_.key!==g)),n===g&&C&&i(C.key),console.log("tabs",o)},hasTab:r,addTabWithNavigate:g=>{u(g,!0);const f=o.find(x=>x.key===g.key)||g;if(!f){console.log("标签页不存在");return}const C=f.key+(f.queryString||"");i(C)}}},[o,n]),h=a.useMemo(()=>m(),[m]),p=["/"],l=a.useMemo(()=>({tabs:o,setTabs:c,activeTab:n,tabEvent:d,whiteList:p,...h}),[o,n]);return e(ve.Provider,{value:l,children:t})},ce=()=>{const{token:t}=Z.useToken();return t},z="/iframe",it=t=>`${z}?url=${t}`;const pe=new Map,Te=t=>{t.map(o=>{fe(o)&&(o==null?void 0:o.type)==="url"||(ke(o)&&Te(o.children||[]),(ge(o)||lt(o))&&(o.path&&pe.set(o.path,o.label),o.children&&Te(o.children||[])))})},Jo=()=>{const{menuList:t}=a.useContext(q),o=a.useMemo(()=>(pe.clear(),Te(t),pe),[t]),c=ne(),[n]=le(),s=()=>{if(c.pathname===z){const m=n.get("url");if(m&&pe.has(m))return[e(ue.Item,{children:e(Ce,{style:{color:"inherit"},to:it(m),children:o.get(m)})},m)]}return[]},d=a.useMemo(()=>{const m=c.pathname.split("/").filter(h=>h);return m.map((h,p)=>{const l=`/${m.slice(0,p+1).join("/")}`;return o.has(l)?e(ue.Item,{children:p===m.length-1?e(Ce,{style:{color:"inherit"},to:l,children:o.get(l)}):o.get(l)},l):null})},[c]),i=[e(ue.Item,{children:e(vt,{})},"home"),...d,...s()];return e(ue,{className:"breadcrumb",children:i})},ut=D.memo(Jo);function Wo({freeze:t,children:o}){const c=a.useRef({}).current;if(t&&!c.promise)throw c.promise=new Promise(n=>{c.resolve=n}),c.promise;if(t)throw c.promise;return c.promise&&(c.resolve(),c.promise=void 0),e(a.Fragment,{children:o})}function Qo({freeze:t,children:o,placeholder:c=null}){return e(a.Suspense,{fallback:c,children:e(Wo,{freeze:t,children:o})})}const Zo=({active:t,children:o,id:c,parentRef:n})=>{const[s]=a.useState(()=>document.createElement("div")),d=a.useRef(!0),i=c.indexOf(z)===0,m=a.useMemo(()=>Ct.createPortal(o,s),[]);return a.useEffect(()=>{const h=()=>{var l,k;if(t&&s.setAttribute("id",c),i)return p();if(t)(l=n.current)==null||l.appendChild(s);else try{(k=n.current)==null||k.removeChild(s)}catch{}},p=()=>{var l;d.current&&((l=n.current)==null||l.appendChild(s)),s.style.display=t?"block":"none",d.current=!1};h()},[t,s,d.current]),a.useEffect(()=>()=>{var h;try{(h=n.current)==null||h.removeChild(s)}catch{}},[]),i?e(Qo,{freeze:!t,children:m}):m};let Ve=1;const Xo=()=>{const t=xt(),{pathname:o,search:c}=ne(),n=o===z?o+c:o,{tabs:s,tabEvent:d,whiteList:i}=a.useContext(ve),m=a.useRef(null),[h,p]=a.useState([]);return a.useEffect(()=>{const l=d.on("reload",k=>{console.log("刷新页面:",k),p(h.map(r=>r.id!==k?r:{...r,key:++Ve}))});return()=>{l()}},[h]),a.useEffect(()=>{if(!n||i.includes(n))return;const l=s.map(k=>k.key);p(k=>(k.find(u=>u.id===n)||k.push({id:n,element:t,key:++Ve}),k.filter(u=>l.includes(u.id))))},[s]),i.includes(n)?t:b(N,{children:[e("div",{ref:m,className:"keep-alive"}),h.map(({id:l,element:k,key:r})=>e(Zo,{active:l===n,parentRef:m,id:l,children:k},r))]})};const ec=()=>{const{pathname:t}=ne(),{tabs:o,activeTab:c,removeTab:n,tabEvent:s,addTabWithNavigate:d}=a.useContext(ve),{colorPrimary:i}=ce(),[m,h]=a.useState(!1),{colorBgLayout:p}=ce(),l=g=>{g&&g!==t&&d({key:g,label:""})},k=(g,f)=>{f==="remove"&&n(g)},r=()=>{s.emit("reload",t)},u=g=>{const f=g;h(f),s.emit("fullScreen",f)},y=()=>b(E,{size:0,children:[e(he,{title:"刷新当前页面",children:e(S,{onClick:r,type:"link",style:{color:i},icon:e(St,{})})}),(()=>m?e(he,{title:"退出全屏",children:e(S,{onClick:()=>u(!1),type:"link",style:{color:i},icon:e(Ze,{})})}):e(he,{title:"全屏",children:e(S,{onClick:()=>u(!0),type:"link",style:{color:i},icon:e(Xe,{})})}))()]}),T={backgroundColor:p,left:m?0:void 0};return e(Ie,{className:"tabs-wrapper",type:"editable-card",hideAdd:!0,activeKey:c,items:[...o],onChange:l,onEdit:k,tabBarExtraContent:e(y,{}),style:T})};const tc=({children:t})=>{const{pathname:o,search:c}=ne(),{addTab:n,hasTab:s,openTab:d,tabs:i,tabEvent:m,whiteList:h}=a.useContext(ve),{mapPathToMenu:p}=a.useContext(q),l=a.useRef(null),[k,{toggleFullscreen:r}]=Ye(l),{colorBgLayout:u}=ce(),[y]=le(),T=Tt(),g=C=>{var U;let x="";const _=C.split("/").filter(A=>A);for(let A=0;A<_.length;A++){const se=`/${_.slice(0,A+1).join("/")}`;p.has(se)&&(x=((U=p.get(se))==null?void 0:U.label)||x)}return x},f=()=>{if(h.includes(o))return;let C=o;o===z&&(C=y.get("url")||"");const x=p.get(C),_=x?o===z?o+c:x.key:o;if(s(_)){d(_);return}if(!x||!x.path){let U=g(C);if(!U)U="404",o===z&&(U="Iframe 页面");else{const{params:{id:A=void 0}}=T.pop()||{params:{id:void 0}};A&&(U+=": "+A)}n({label:U,key:_,queryString:c,children:null});return}n({label:x.label,key:_,queryString:o===z?"":c,children:null})};return a.useEffect(()=>{f()},[o,c]),a.useEffect(()=>{},[c]),a.useEffect(()=>{const C=m.on("fullScreen",x=>{r()});return()=>{C()}},[]),b(R.Content,{className:"content",ref:l,style:{backgroundColor:u},children:[i.length?e(ec,{}):null,i.length?e(ut,{}):null,e(Xo,{})]})},oc=D.memo(tc),mt=()=>{const{settings:{showFooter:t}}=a.useContext(K),{Text:o,Link:c}=L;return t?e(R.Footer,{style:{textAlign:"center",paddingBottom:4},children:b(c,{href:"https://github.com/MTABBJ",target:"_blank",style:{color:"inherit"},children:[e(Mt,{}),e(o,{type:"secondary",children:" Moto "})]})}):null};const cc=()=>{const{fullScreen:t,setFullScreen:o}=a.useContext(J),c=()=>{H.success(t?"已退出全屏模式":"进入全屏模式"),o(!t)};return t?e(Ze,{title:"退出全屏模式",className:"action-icon",onClick:c}):e(Xe,{title:"进入全屏模式",className:"action-icon",onClick:c})},nc=()=>e(L.Link,{className:"action-icon",target:"_blank",style:{color:"inherit"},href:"https://github.com/MTABBJ",children:e(It,{})}),O=wt({scriptUrl:j.iconFontUrl,extraCommonProps:{}}),sc=[[2,1,"刚刚"],[60,1,"%d秒前"],[3600,60,"%d分钟前"],[86400,3600,"%d小时前"],[86400*30,3600*24,"%d天前"],[86400*30*12,3600*24*30,"%d月前"],[1/0,3600*24*30*12,"%d年前"]],ac=[[-60,1,"%d秒后"],[-3600,60,"%d分钟后"],[-86400,3600,"%d小时后"],[-(86400*30),3600*24,"%d天后"],[-(86400*30*12),3600*24*30,"%d月后"],[-1/0,3600*24*30*12,"%d年后"]],rc=({time:t,...o})=>{const c=Math.floor(new Date().getTime()/1e3),n=Math.floor(new Date(t).getTime()/1e3),s=c-n;if(isNaN(n))return e(N,{children:"time"});const d=s<-1?ac:sc;let i="";for(const[m,h,p]of d)if(Math.abs(s)<Math.abs(m)){const l=Math.floor(Math.abs(s)/h);i=p.replace("%d",String(l));break}return e(he,{title:t,children:e("span",{...o,children:i})})},dc=()=>e(te,{size:"small",itemLayout:"horizontal",dataSource:[{title:"张三 评论了你",desc:"评论内容评论内容评论内容",createTime:"2023-04-06 15:39:00"},{title:"您有3个订单待支付",desc:"订单1,订单2,订单3",createTime:"2023-04-05 15:39:00"},{title:"张三 的请假申请需要您的审批",desc:"",createTime:"2023-04-01 12:08:00"},{title:"本周周报待填写",createTime:"2023-03-02 10:55:00",desc:"说明"}],renderItem:o=>e(te.Item,{children:e(te.Item.Meta,{avatar:e(we,{size:48,icon:e(et,{})}),title:e("a",{href:"https://ant.design",children:o.title}),description:b("div",{children:[o.desc,o.desc&&e("br",{}),e(L.Text,{children:e(rc,{style:{fontSize:12},time:o.createTime})})]})})})}),lc=()=>e(te,{size:"small",itemLayout:"horizontal",dataSource:[{title:"您有一封新的邮件",type:"mail"},{title:"您有3个订单待支付",type:"payment"},{title:"张三 的请假申请需要您的审批",type:"workflow"},{title:"本周周报待填写",type:"common"}],renderItem:o=>e(te.Item,{children:e(te.Item.Meta,{avatar:e(O,{style:{fontSize:30},type:`icon-${o.type}`}),title:e("a",{href:"https://ant.design",children:o.title}),description:"3天前"})})}),ic=()=>b(N,{children:[e(Ie,{centered:!0,style:{width:300},defaultActiveKey:"notify",items:[{key:"notify",label:"通知(3)",children:e(lc,{})},{key:"message",label:"消息(4)",children:e(dc,{})}],onChange:void 0,tabBarExtraContent:e(S,{type:"link",style:{marginRight:10},children:"清空"})}),e(V,{style:{margin:"8px 0"}}),b(E,{split:e(V,{type:"vertical"}),style:{width:"100%",justifyContent:"center",marginBottom:0},children:[e(S,{type:"link",children:"全部已读"}),e(S,{type:"link",children:"查看更多"})]})]}),uc=t=>e(xe,{count:98,children:e(Pt,{arrow:!1,content:e(ic,{}),placement:"bottomRight",trigger:"click",children:e(O,{title:"通知提醒",type:"icon-notify",className:"action-icon"})})}),mc=()=>e(O,{title:"搜索",type:"icon-search",className:"action-icon"}),hc=()=>{const{settings:{theme:t},setSetting:o}=a.useContext(K),c=()=>{o({followSystemTheme:!1,theme:t==="light"?"dark":"light"})};return t==="dark"?e(O,{onClick:c,title:"主题-深色模式",type:"icon-theme-dark",className:"action-icon"}):e(O,{onClick:c,title:"主题-明亮模式",type:"icon-theme-light",className:"action-icon"})};const pc=t=>{const o=["#1890ff","#722ed1","#eb2f96","#00b96b","#52c41a","#13c2c2","#1677ff","#f5222d","#fa8c16","#faad14"],{onChange:c,presetColors:n=o,defaultSelectedColor:s=""}=t,{value:d=s}=t,[i,m]=a.useState(d),h=p=>{m(p),c==null||c(p)};return e("div",{className:"theme-color-wrap",children:n.map(p=>e("div",{onClick:()=>h(p),className:"theme-color-item",style:{backgroundColor:p},title:p,children:i===p&&e(_t,{className:"checked-icon"})},p))})},gc=t=>{const{open:o,onClose:c=G}=t,{settings:n,setSetting:s}=a.useContext(K),[d]=v.useForm(),[i]=at(),m=a.useMemo(()=>({...n,theme:n.followSystemTheme?"followSystem":n.theme}),[n]),h=(p,l)=>{const k={...p},{theme:r,fixedMenu:u,fixedHeader:y}=k;r&&(console.log("themeee",r),k.followSystemTheme=!1,r==="followSystem"&&(k.followSystemTheme=!0,k.theme=i)),u&&(k.fixedHeader=!0),y===!1&&(k.fixedMenu=!1),s(k),console.log("chage",p,l)};return oe(()=>{d==null||d.setFieldsValue(m)},[m]),e(Lt,{title:"偏好设置",onClose:c,open:o,children:b(v,{name:"basic",labelCol:{span:5},wrapperCol:{span:19},initialValues:{...m},autoComplete:"off",onValuesChange:h,form:d,children:[e(v.Item,{label:"外观",name:"theme",children:b(P.Group,{buttonStyle:"solid",children:[b(P.Button,{value:"light",children:[e(O,{type:"icon-theme-light"})," 浅色"]}),b(P.Button,{value:"dark",children:[e(O,{type:"icon-theme-dark"})," 深色"]}),b(P.Button,{value:"followSystem",children:[e(O,{type:"icon-followSystem"})," 跟随系统"]})]})}),e(v.Item,{label:"紧凑模式",valuePropName:"checked",name:"compactMode",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(v.Item,{label:"主题色",name:"primaryColor",children:e(pc,{defaultSelectedColor:n.primaryColor})}),e(V,{children:"布局"}),e(v.Item,{label:"多标签页",valuePropName:"checked",name:"multitabMode",children:e(ae,{checkedChildren:"启用",unCheckedChildren:"关闭"})}),e(v.Item,{label:"固定头部",valuePropName:"checked",name:"fixedHeader",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(v.Item,{help:"固定菜单启用时, 头部也会同步固定",label:"固定菜单",valuePropName:"checked",name:"fixedMenu",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})}),e(v.Item,{valuePropName:"checked",label:"显示底部",name:"showFooter",children:e(ae,{checkedChildren:"开启",unCheckedChildren:"关闭"})})]})})},fc=t=>{const[o,c]=a.useState(!1);return b("div",{children:[e(gc,{open:o,onClose:()=>{c(!1)}}),e(O,{onClick:()=>{c(!0)},title:"设置",type:"icon-setting",className:"action-icon"})]})},yc=()=>{const{userInfo:t,setUserInfo:o,setIsLogin:c}=a.useContext(J),{menuCollapsed:n,setMenuCollapsed:s}=a.useContext(q),{token:{colorBgContainer:d}}=Z.useToken(),i=X(),m=()=>b("div",{className:"left",children:[e("div",{className:"logo",children:e("span",{className:"logo-text",children:"my-react-tools"})}),e("div",{children:D.createElement(n?Nt:At,{onClick:()=>s(!n)})})]}),h=()=>{const p=()=>b(N,{children:[e(mc,{}),e(uc,{}),e(cc,{}),e(nc,{}),e(hc,{}),e(fc,{})]}),l=[{label:e("a",{children:"个人中心"}),icon:e(et,{}),key:"userCenter"},{label:e("a",{children:"修改资料"}),key:"update",icon:e(tt,{})},{type:"divider"},{label:"退出",icon:e(Ft,{}),key:"logout",onClick:()=>{Lo().then(()=>{B.removeToken(),c(!1),o(null),i("/login")})}}];return e("div",{className:"right",children:b(E,{size:"middle",children:[p(),e(Rt,{menu:{items:l},children:b(E,{className:"pointer",children:[e("span",{children:t==null?void 0:t.nickname}),e(we,{src:t==null?void 0:t.avatar})]})})]})})};return e(R.Header,{className:"header",style:{background:d},children:b(N,{children:[m(),h()]})})},ht=D.memo(yc),bc=()=>{const t=X(),{pathname:o}=ne(),[c,n]=a.useState(),{menuList:s,mapPathToMenu:d}=a.useContext(q);let i="/dashboard",m=[],h=!1;const[p]=le();oe(()=>{let r=d.get(o);if(!r){let u="";d.forEach(({path:y})=>{o.startsWith(y)&&y.length>u.length&&(u=y)}),u&&(r=d.get(u))}r&&(r!=null&&r.hideInMenu?n([r.parent]):n([o]))},[o]);const l=r=>{const u=d.get(r.key);if(console.log("clicked menu",r,u),!u){console.warn("未获取到菜单信息");return}if(u.path!==o){if((u==null?void 0:u.type)==="url"){window.open(u.path,"_blank");return}if(document.title=`${j.pageTitlePrefix} - ${u.label}`,(u==null?void 0:u.type)==="iframe"){console.log("打开iframe页面"),t(it(u.path));return}t(u.path)}},k=a.useMemo(()=>{const r=y=>y.badge?y.badge==="dot"?e(xe,{className:"menu-item-badge",offset:[6,0],dot:!0,children:y.label}):e(xe,{className:"menu-item-badge",offset:[15,0],count:y.badge,children:y.label}):y.label,u=(y,T)=>{const g=[];return!h&&T&&m.push(T.key),y.map(f=>{if(fe(f)&&(f.parent&&o.indexOf(f.path)===0&&(console.log("ccccccccccccccccccccc",f.parent),i=f.parent,h=!0),f.type==="iframe"&&(p.get("url")||"")===f.path&&(h=!0,i=f.key),f.hideInMenu))return;let C;if(jo(f))C={...f};else if(ke(f))C={...f},f.children&&f.children.length>0&&(C.children=u(f.children));else if(ge(f)||lt(f)){let{icon:x}=f;typeof x=="string"&&x.includes("icon-")&&(x=e(O,{type:x})),C={key:"",...f,icon:x,label:r(f),children:ge(f)?u(f.children,f):void 0},!h&&f.path===o&&(i=f.key,h=!0)}C&&(C.key=C.key,g.push(C))}),!h&&m.pop(),g};return u(s)},[s]);return e($t,{style:{height:"100%"},onClick:l,mode:"inline",defaultSelectedKeys:[i],selectedKeys:c,items:k,defaultOpenKeys:m})},kc=D.memo(bc);const pt=()=>{const{menuCollapsed:t}=a.useContext(q),{colorBgContainer:o}=ce();return e(R.Sider,{style:{background:o},trigger:null,className:"left-sider",collapsible:!0,collapsed:t,children:e(kc,{})})};const vc=()=>{console.log("MultitabLayout render...");const{menuCollapsed:t}=a.useContext(q);return e(Yo,{children:b(R,{className:"multitab-layout","data-menu-collapsed":t?1:0,children:[e(ht,{}),b(R,{children:[e(pt,{}),b(R,{className:"content-layout",children:[e(oc,{}),e(mt,{})]})]})]})})},Cc=D.memo(vc);const xc=({children:t})=>e(R.Content,{className:"content",children:t}),Sc=D.memo(xc);const Tc=()=>{console.log("SingleLaylut render...");const{menuCollapsed:t}=a.useContext(q);return b(R,{className:"single-tab-layout","data-menu-collapsed":t?1:0,children:[e(ht,{}),b(R,{children:[e(pt,{}),b(R,{className:"content-layout",children:[e(ut,{}),e(Sc,{children:e(Et,{})}),e(mt,{})]})]})]})};const Mc=()=>{const[t,o]=a.useState(!0),{setIsLogin:c,setUserInfo:n}=a.useContext(J),{colorBgContainer:s}=ce(),{settings:{multitabMode:d,fixedMenu:i,fixedHeader:m,theme:h}}=a.useContext(K),p=X(),[l]=le();return console.log("global layout render..."),a.useEffect(()=>{if(!ze()){p("/login");return}_o().then(k=>{if(o(!1),c(!0),n(k),l.has("ghpage")){const r=decodeURIComponent(l.get("ghpage"));p(r);return}}).catch(k=>{k instanceof Ut&&We.error({message:"网络错误",description:"获取用户信息失败, 无法打开页面",duration:null,closeIcon:null})})},[]),oe(()=>{ze()||(H.error("登录状态已失效, 即将跳转到登录页面..."),setTimeout(()=>{p("/login")},500))}),t?e(Re,{title:"页面加载中",loading:t}):e(Ko,{children:b("div",{"data-fixed-menu":i?1:0,"data-fixed-header":m?1:0,style:{background:s},className:`global-layout theme-${h}`,children:[d?e(Cc,{}):e(Tc,{}),e(Ho,{})]})})},Ic=D.memo(Mc),je=()=>e("span",{children:"UserCenterPage"}),wc=()=>e("span",{children:"UserCenterUpdatePage"});const gt=a.forwardRef(({state:t},o)=>{const[c]=v.useForm(),n=a.useRef(null);return a.useImperativeHandle(o,()=>({form:c,input:n.current}),[c,n]),e("div",{children:b(v,{form:c,labelCol:{span:3},name:"userForm",initialValues:t||void 0,children:[e(v.Item,{name:"username",label:"账号",rules:[{required:!0,message:"请输入账号"}],children:e(I,{placeholder:"请输入账号",ref:n})}),e(v.Item,{name:"password",label:"密码",rules:[{required:!t,message:"请输入密码"}],children:e(I.Password,{placeholder:t?"不修改密码请留空!":"请输入密码"})}),e(v.Item,{name:"nickname",label:"昵称",rules:[{required:!0,message:"请输入昵称"}],children:e(I,{placeholder:"请输入昵称"})}),e(v.Item,{name:"gender",label:"性别",children:b(P.Group,{children:[e(P,{value:1,children:"男"}),e(P,{value:2,children:"女"})]})}),e(v.Item,{name:"mobile",label:"手机号",children:e(I,{placeholder:"请输入手机号"})}),e(v.Item,{name:"email",label:"邮箱",children:e(I,{placeholder:"请输入邮箱"})})]})})}),Pc=({refreshList:t})=>{const[o,c]=a.useState(!1),{run:n,loading:s}=F(Ao,{manual:!0,debounceWait:100,onSuccess:()=>{var m;c(!1),(m=d.current)==null||m.form.resetFields(),t==null||t()}}),d=a.useRef(null);return b("div",{children:[e(S,{type:"primary",icon:e(ye,{}),onClick:()=>{c(!0),setTimeout(()=>{var m,h;(h=(m=d.current)==null?void 0:m.input)==null||h.focus()},100)},children:"新增用户"}),e(ot,{open:o,title:"添加用户",okText:"添加",cancelText:"取消",confirmLoading:s,onCancel:()=>c(!1),onOk:()=>{var m;(m=d.current)==null||m.form.validateFields().then(h=>{n(h)}).catch(h=>console.log(h))},children:e(gt,{ref:d})})]})},_c=(t,o)=>{const c=Ot(t,o),{tableProps:n}=c,s={...n.pagination,showTotal:(m,h)=>`第${h[0]}-${h[1]} 条/共 ${m} 条`,hideOnSinglePage:!0};n.pagination=s;const d=n.onChange,i=(...m)=>{var T;let[h,p,l,k]=m,r=h,u,y;Object.keys(l).length>0&&(Array.isArray(l)?(y={},l.map(g=>{var f;y[(f=g.column)==null?void 0:f.dataIndex]=g.order})):y={[(T=l.column)==null?void 0:T.dataIndex]:l.order}),Object.keys(p).length>0&&(u=p,console.log("filterrrrrrrrrrrrr",p)),d(r,u,y)};return n.onChange=i,c.tableProps.size="small",c},Lc=({state:t,refreshList:o})=>{const[c,n]=a.useState(!1),{runAsync:s,loading:d}=F(Ro,{manual:!0,debounceWait:100}),i=a.useRef(null);return b(N,{children:[e(S,{icon:e(tt,{}),size:"small",onClick:()=>{n(!0),setTimeout(()=>{var h,p;(p=(h=i.current)==null?void 0:h.input)==null||p.focus()},100)},children:"编辑"}),e(ot,{open:c,title:"更新用户信息",okText:"保存",cancelText:"取消",confirmLoading:d,onCancel:()=>n(!1),onOk:()=>{var h;(h=i.current)==null||h.form.validateFields().then(p=>{s({...p,id:t.id}).then(()=>{var l;n(!1),(l=i.current)==null||l.form.resetFields(),o==null||o()}).catch(G)}).catch(p=>console.log(p))},children:e(gt,{ref:i,state:t})})]})};const W=t=>{const{children:o,className:c="",style:n={},...s}=t,{colorBgContainer:d}=ce(),i="content-box",m={backgroundColor:d};return e("div",{className:`${i} ${c}`,style:{...m,...n},...s,children:o})},Nc=t=>{const{search:o,form:c,onSearch:n,onReset:s,fields:d,title:i="搜索",...m}=t,h=a.useCallback((y,T,g)=>{switch(typeof T=="string"&&["input","number","select"].includes(y)&&(g.placeholder=(g==null?void 0:g.placeholder)||T),y){case"input":return e(I,{...g});case"number":return e(Dt,{...g});case"select":return e(_e,{...g});case"radio":return e(P.Group,{...g});case"date":return e(Fe,{...g});case"dateRange":return e(Fe.RangePicker,{...g});case"checkbox":return e(Pe.Group,{...g});case"cascader":return e(Bt,{...g});case"treeSelect":return e(be,{...g});default:return e(N,{})}},[]),p=async()=>{await c.validateFields().catch(y=>console.warn(y)),n==null||n(c),o.submit()},l=()=>{s==null||s(c),o.reset()},k={labelCol:{span:5},style:{paddingTop:16}},r=({type:y,name:T,label:g,fieldProps:f={},itemProps:C={}})=>e(de,{span:6,children:e(v.Item,{name:T,label:g,...C,children:h(y,g,f)})},`${T}-${g}`),u=()=>{const y=o.type==="simple"?0:18-d.length%4*6;return b(de,{span:6,offset:y,style:{textAlign:"right"},children:[e(S,{onClick:l,children:"重置"}),e(S,{style:{margin:"0 8px"},type:"primary",onClick:p,children:"查询"}),d.length>3&&b("a",{style:{fontSize:12},onClick:o.changeType,children:[o.type==="advance"?e(Ht,{}):e(zt,{}),o.type==="advance"?"收起":"展开"]})]})};return d.length===0?null:b(W,{children:[e("div",{children:e(L.Title,{level:5,children:i})}),e(v,{form:c,...k,...m,children:b(Le,{gutter:24,children:[o.type==="advance"?d.map(r):d.slice(0,3).map(r),u()]})})]})},Ac=()=>{var g;console.log("render ExampleUserListPage");const[t]=v.useForm(),[o,c]=a.useState([]),n=a.useRef();a.useEffect(()=>{n.current=new Map},[]);const{runAsync:s,loading:d}=F(Fo,{manual:!0,debounceWait:100}),{refresh:i,tableProps:m,search:h}=_c(No,{form:t}),p=()=>{h.reset(),h.submit()},l=f=>{var C;typeof f=="number"&&((C=n==null?void 0:n.current)==null||C.set(f,!0)),s({id:f}).then(()=>{typeof f=="object"&&c([]),i()}).finally(()=>{var x;return typeof f=="number"&&((x=n==null?void 0:n.current)==null?void 0:x.delete(f))})},k=a.useMemo(()=>[{title:"ID",dataIndex:"id"},{title:"账号",dataIndex:"username",render:(f,{avatar:C,username:x})=>b(N,{children:[" ",e(we,{src:C})," ",x]})},{title:"昵称",dataIndex:"nickname"},{title:"性别",dataIndex:"gender",render:f=>f===rt.male?e($e,{color:"blue",children:"男"}):e($e,{color:"error",children:"女"})},{title:"邮箱",dataIndex:"email"},{title:"手机号",dataIndex:"mobile",sorter:!0},{title:"注册时间",dataIndex:"create_time",sorter:!0},{title:"操作",key:"operation",fixed:"right",render:(f,C)=>{var _;const{id:x}=C;return b(E,{children:[e(Ee,{title:"确认要删除这条数据吗?",onConfirm:()=>l(x),children:e(S,{loading:(_=n==null?void 0:n.current)==null?void 0:_.has(x),icon:e(Vt,{}),size:"small",danger:!0,children:"删除"})}),e(Lc,{state:C,refreshList:i})]})}}],[]),u={selectedRowKeys:o,onChange:f=>{console.log("selectedRowKeys changed: ",f),c(f)}},y=o.length>0;return b(N,{children:[e(Nc,{form:t,search:h,fields:[{type:"input",label:"账号",name:"username"},{type:"input",label:"手机号",name:"mobile"},{type:"input",label:"邮箱",name:"email"},{type:"select",label:"性别",name:"gender",fieldProps:{options:[{label:"男",value:"1"},{label:"女",value:"2"}]}}]}),e("br",{}),b(W,{children:[b("div",{className:"table-header",children:[e("div",{className:"left",children:e(L.Title,{level:5,children:"用户列表"})}),e("div",{className:"right",children:b(E,{size:"middle",children:[e(Ee,{title:`确定要删除这${o.length}条数据吗?`,onConfirm:()=>l(o),children:e(S,{type:"primary",danger:!0,disabled:!y,loading:d&&((g=n.current)==null?void 0:g.size)===0,children:"批量删除"})}),e(Pc,{refreshList:p}),e(S,{type:"link",title:"点击刷新",onClick:i,icon:e(jt,{})})]})})]}),e(qt,{rowKey:"id",rowSelection:u,columns:k,...m})]})]})},me=({title:t="空白页"})=>{const[o,c]=a.useState(0);return le(),console.log("BlankPage: 被调用"),a.useEffect(()=>(console.log("BlankPage: 初次渲染"),()=>{console.log("BlankPage: 被卸载了")}),[]),b(W,{style:{height:"500px"},children:[e(L.Title,{level:4,children:t}),b(L.Text,{children:["Count: ",o]}),e("br",{}),e(S,{onClick:n=>c(s=>s+1),children:"add"})]})},Rc=()=>Kt.init((Math.random()*1e7).toString(16).substr(0,4)+new Date().getTime()+Math.random().toString()),Fc=(t,o)=>{let c=Math.floor(Math.random()*(t-o)+o);return c=parseInt(c+"")+parseFloat(Math.random()+""),c=Math.round(c*100)/100,c},$c=[{code:"011102",desc:"采煤机配件"},{code:"011108",desc:"掘进机配件"},{code:"011112",desc:"液压支架配件"},{code:"011114",desc:"电液控制系统配件"},{code:"011116",desc:"乳化液泵站配件"},{code:"011118",desc:"喷雾泵站配件"},{code:"011130",desc:"采掘设备通用配件"},{code:"011504",desc:"装岩机配件"},{code:"011702",desc:"井下刮板输送机配件"},{code:"011704",desc:"井下转载机配件"},{code:"011716",desc:"矿用机车配件"},{code:"011720",desc:"井下防爆无轨胶轮车配件"},{code:"011908",desc:"矿井提升机配件"},{code:"020704",desc:"汽机辅助设备配件"},{code:"030504",desc:"轨道联结件"},{code:"060502",desc:"反应器"},{code:"060922",desc:"捣固焦炉配件"},{code:"069904",desc:"煤焦化专用机械设备配件"},{code:"069999",desc:"煤化工设备配件"},{code:"080302",desc:"内燃机油"},{code:"080304",desc:"齿轮油"},{code:"080306",desc:"液压油"},{code:"080308",desc:"全损耗系统用油"},{code:"080312",desc:"压缩机油"},{code:"080506",desc:"乳化液"},{code:"080710",desc:"锂基润滑脂"},{code:"080712",desc:"复合锂基润滑脂"},{code:"080718",desc:"脲基润滑脂"},{code:"080724",desc:"高低温润滑脂"},{code:"080732",desc:"特种润滑脂"},{code:"090314",desc:"角钢"},{code:"090324",desc:"圆钢"},{code:"090326",desc:"方钢"},{code:"090328",desc:"扁钢"},{code:"090702",desc:"钢板"},{code:"090902",desc:"无缝钢管"},{code:"090904",desc:"焊接钢管"},{code:"100502",desc:"矿用移动型阻燃橡套电缆"},{code:"100504",desc:"矿用固定敷设阻燃电缆"},{code:"100702",desc:"船用电力电缆"},{code:"100904",desc:"聚氯乙烯绝缘电线电缆"},{code:"101308",desc:"交联电力电缆"},{code:"101310",desc:"特殊电力电缆"},{code:"101504",desc:"塑料绝缘控制电缆"},{code:"101508",desc:"信号电缆"},{code:"101906",desc:"电伴热带"},{code:"102102",desc:"各种光缆"},{code:"102304",desc:"电缆导体用接线端头或线鼻子"},{code:"102310",desc:"电缆桥架及附件"},{code:"102314",desc:"电力线路金具"},{code:"110106",desc:"气象仪器"},{code:"111104",desc:"通信、线缆检测分析仪器"},{code:"111504",desc:"气体减压器"},{code:"111508",desc:"标准压力表"},{code:"111510",desc:"压力表"},{code:"111512",desc:"压力变送器"},{code:"111514",desc:"差压变送器"},{code:"111518",desc:"特种压力表"},{code:"111704",desc:"流量计"},{code:"111916",desc:"磁翻转液位计"},{code:"111922",desc:"雷达物位计"},{code:"111990",desc:"物位仪表配件"},{code:"112126",desc:"酸度仪"},{code:"112140",desc:"可燃有毒气体检测器"},{code:"112190",desc:"分析仪配件"},{code:"112302",desc:"记录、显示仪"},{code:"112306",desc:"巡回检测仪"},{code:"112504",desc:"电动执行机构"},{code:"112508",desc:"单座调节阀"},{code:"112514",desc:"控制球阀"},{code:"112518",desc:"控制蝶阀"},{code:"112532",desc:"阀门定位器"},{code:"112538",desc:"电磁阀"},{code:"112902",desc:"仪表管件接头"},{code:"112910",desc:"仪表用套管"},{code:"112999",desc:"其他仪表管件"},{code:"113302",desc:"电流表"},{code:"113314",desc:"万用表"},{code:"113318",desc:"电阻测量仪器"},{code:"113330",desc:"电工仪器仪表配件及附件"},{code:"113504",desc:"测厚仪"},{code:"113514",desc:"传感器及转换器"},{code:"113722",desc:"计量标准器具附件"},{code:"113912",desc:"集中取样分析设备"},{code:"113990",desc:"实验室仪器及装置配件"},{code:"114114",desc:"光学仪器附件"},{code:"114306",desc:"流量校验仪器及设备"},{code:"114502",desc:"气体安全检测仪器"},{code:"120106",desc:"聚酯输送带"},{code:"120502",desc:"各种输送带"},{code:"130108",desc:"高压球阀"},{code:"130302",desc:"中压闸阀"},{code:"130304",desc:"中压截止阀"},{code:"130308",desc:"中压球阀"},{code:"130502",desc:"低压闸阀"},{code:"130504",desc:"低压截止阀"},{code:"130516",desc:"低压止回阀"},{code:"130520",desc:"低压蝶阀"},{code:"130524",desc:"低压球阀"},{code:"130526",desc:"低压疏水阀"},{code:"130599",desc:"其他低压阀门"},{code:"130706",desc:"中压安全阀"},{code:"130710",desc:"低压安全阀"},{code:"131504",desc:"塑料阀"},{code:"131999",desc:"其他各种阀门"},{code:"132104",desc:"对焊法兰"},{code:"132106",desc:"平焊法兰"},{code:"132116",desc:"盲法兰"},{code:"132704",desc:"单头螺纹短节"},{code:"132706",desc:"双头螺纹短节"},{code:"132902",desc:"弯头"},{code:"133302",desc:"三通"},{code:"133304",desc:"四通"},{code:"133902",desc:"各种膨胀节(补偿器)"},{code:"134102",desc:"各种金属软管"},{code:"134302",desc:"各种阻火器及配件"},{code:"140102",desc:"单级清水离心泵"},{code:"140106",desc:"多级清水离心泵"},{code:"140132",desc:"潜水泵"},{code:"141108",desc:"齿轮泵"},{code:"141302",desc:"各种其他泵"},{code:"141502",desc:"单级清水离心泵配件"},{code:"141510",desc:"单级耐腐蚀离心泵配件"},{code:"141520",desc:"污水泵配件"},{code:"141522",desc:"渣浆泵配件"},{code:"142308",desc:"隔膜泵配件"},{code:"142310",desc:"计量泵配件"},{code:"160112",desc:"铁线"},{code:"160116",desc:"普通钢丝绳"},{code:"160118",desc:"重要用途钢丝绳"},{code:"160144",desc:"脚手架"},{code:"160146",desc:"金属扣件"},{code:"160199",desc:"其他黑色金属材料及制品"},{code:"160302",desc:"焊条"},{code:"160502",desc:"螺栓"},{code:"160504",desc:"螺柱"},{code:"160506",desc:"螺母"},{code:"160902",desc:"巷道金属支架"},{code:"160916",desc:"金属防护、支护用品附件及配件"},{code:"170302",desc:"玻璃"},{code:"170304",desc:"玻璃纤维及其制品"},{code:"170510",desc:"实验室常备玻璃仪器"},{code:"170712",desc:"玻璃钢板"},{code:"171502",desc:"普通轮胎"},{code:"171506",desc:"传动带"},{code:"171508",desc:"橡胶板"},{code:"171510",desc:"橡胶管"},{code:"171516",desc:"防护类胶布"},{code:"171518",desc:"橡胶零件"},{code:"171520",desc:"胶管总成"},{code:"171704",desc:"塑料板"},{code:"171706",desc:"塑料丝、绳及其他编织品"},{code:"171710",desc:"塑料零件"},{code:"171714",desc:"塑料管"},{code:"171716",desc:"塑料型材"},{code:"171799",desc:"其他塑料制品"},{code:"171902",desc:"石棉橡胶板"},{code:"171908",desc:"石棉绳、线"},{code:"179904",desc:"竹材及其制品"},{code:"179910",desc:"风筒及附件"},{code:"179999",desc:"其他制品"},{code:"180199",desc:"其他有机化学品"},{code:"180304",desc:"碱类"},{code:"180708",desc:"除草剂"},{code:"181702",desc:"各种其他化工产品"},{code:"181904",desc:"通用有机试剂"},{code:"181910",desc:"基准及标准试剂"},{code:"182102",desc:"调和漆"},{code:"182114",desc:"防锈漆"},{code:"182120",desc:"墙面涂料"},{code:"182302",desc:"稀释剂"},{code:"183114",desc:"水处理剂"},{code:"183708",desc:"活性炭"},{code:"183902",desc:"各种凡士林"},{code:"184302",desc:"皮带胶粘材料"},{code:"184304",desc:"密封结构胶粘剂"},{code:"184399",desc:"其他胶粘剂"},{code:"184502",desc:"工业清洗剂"},{code:"191504",desc:"石膏制品"},{code:"191902",desc:"砖"},{code:"191932",desc:"彩钢瓦/瓦楞板"},{code:"192104",desc:"耐火泥"},{code:"192702",desc:"普通门"},{code:"192704",desc:"工业门"},{code:"192708",desc:"防护栏栅"},{code:"192904",desc:"卫生洁具"},{code:"192910",desc:"建筑用小五金"},{code:"193302",desc:"磨具"},{code:"193304",desc:"超硬材料磨具"},{code:"193502",desc:"水暖管件"},{code:"193504",desc:"采暖散热器"},{code:"200102",desc:"普通机械密封"},{code:"200502",desc:"O型密封圈"},{code:"200506",desc:"防爆密封圈"},{code:"200508",desc:"油封件"},{code:"200702",desc:"基本型缠绕垫"},{code:"200704",desc:"内外环缠绕垫"},{code:"200706",desc:"带内环缠绕垫"},{code:"200914",desc:"聚四氟乙烯垫片"},{code:"209904",desc:"各种其他密封件"},{code:"210320",desc:"液力偶合器配件"},{code:"210326",desc:"液压泵站"},{code:"210330",desc:"液压元件"},{code:"210502",desc:"球轴承"},{code:"210504",desc:"滚子轴承"},{code:"210902",desc:"减速器"},{code:"211104",desc:"联轴器"},{code:"211504",desc:"蒸汽锅炉配件"},{code:"212114",desc:"空冷器"},{code:"212702",desc:"空气调节机"},{code:"212904",desc:"往复式压缩机"},{code:"212908",desc:"压缩机配件"},{code:"212916",desc:"一般用途通风机"},{code:"212920",desc:"通风机配件"},{code:"212998",desc:"其他风机"},{code:"213158",desc:"空冷凝汽器控制系统"},{code:"213302",desc:"分散控制系统(DCS)配件"},{code:"213304",desc:"可编程控制器PLC系统配件"},{code:"213388",desc:"机器人配件"},{code:"213708",desc:"除尘设备配件"},{code:"213710",desc:"过滤装置"},{code:"213712",desc:"过滤装置配件"},{code:"213990",desc:"水处理设备配件"},{code:"214314",desc:"台、案秤"},{code:"214990",desc:"切焊设备附件"},{code:"215102",desc:"张紧放线机械"},{code:"216104",desc:"离心设备配件"},{code:"216312",desc:"综合保护及通讯系统配件"},{code:"216320",desc:"喷雾降尘系统配件"},{code:"216322",desc:"矿井安全监测系统"},{code:"216324",desc:"矿井安全监测系统配件"},{code:"217332",desc:"干燥器、干燥机"},{code:"217344",desc:"加油机"},{code:"217354",desc:"采样制样设备"},{code:"219912",desc:"喷射机械配件"},{code:"219942",desc:"清洗机配件"},{code:"219964",desc:"硫化机配件"},{code:"230102",desc:"起重滑车"},{code:"230106",desc:"手、气、液动葫芦"},{code:"230108",desc:"电动葫芦"},{code:"230118",desc:"起重葫芦配件"},{code:"230120",desc:"绞车、绞盘"},{code:"230148",desc:"起重机配件"},{code:"230166",desc:"悬挂单轨系统"},{code:"230168",desc:"起重吊索具"},{code:"230790",desc:"输送机配件"},{code:"230990",desc:"给料机配件"},{code:"231104",desc:"堆取机械配件"},{code:"231126",desc:"液体装卸设备配件"},{code:"231302",desc:"货架、货柜"},{code:"231306",desc:"仓储辅助设施"},{code:"241102",desc:"有线电话设备"},{code:"241108",desc:"无线对讲设备"},{code:"241110",desc:"移动通信设备"},{code:"250102",desc:"自带能源便携式电灯"},{code:"250104",desc:"室内灯具"},{code:"250106",desc:"公共照明灯具"},{code:"250110",desc:"防爆灯具"},{code:"250116",desc:"灯泡/灯管"},{code:"250190",desc:"照明装置配件"},{code:"250302",desc:"原电池(组)"},{code:"250306",desc:"蓄电池(组)"},{code:"250506",desc:"报警器及类似装置"},{code:"250706",desc:"交流电动机"},{code:"250790",desc:"电动机、防爆电动机配件"},{code:"251128",desc:"变电站配件"},{code:"251302",desc:"互感器"},{code:"251506",desc:"变频设备(器)"},{code:"251508",desc:"变频设备(器)配件"},{code:"251522",desc:"稳定电源"},{code:"251526",desc:"不间断电源(UPS)"},{code:"251538",desc:"整流组件、整流模块"},{code:"252350",desc:"高压熔断器"},{code:"252502",desc:"低压电路开关"},{code:"252504",desc:"低压电路开关配件"},{code:"252510",desc:"低压电路断路器"},{code:"252514",desc:"低压电路熔断器"},{code:"252518",desc:"低压电路的控制电器"},{code:"252520",desc:"低压电路的控制电器配件"},{code:"252534",desc:"漏电保护器"},{code:"252540",desc:"低压电气柜配件"},{code:"252542",desc:"低压配电箱"},{code:"252544",desc:"低压配电箱配件"},{code:"252550",desc:"低压电路插座(插线板)"},{code:"252552",desc:"插头"},{code:"252554",desc:"信号隔离器、安全栅"},{code:"252702",desc:"隔爆型起动控制装置"},{code:"252706",desc:"隔爆型电磁起动器"},{code:"252708",desc:"隔爆型电磁起动器配件"},{code:"252712",desc:"隔爆型馈电开关配件"},{code:"252718",desc:"防爆电器装置"},{code:"252724",desc:"防爆接线箱"},{code:"252728",desc:"防爆电器安装管件"},{code:"252799",desc:"其他防爆电器及装置配件"},{code:"252902",desc:"继电器"},{code:"252904",desc:"继电器配件"},{code:"252906",desc:"综合保护装置"},{code:"252908",desc:"综合保护装置配件"},{code:"259904",desc:"电磁铁"},{code:"259908",desc:"永久磁铁"},{code:"259914",desc:"传感器"},{code:"260702",desc:"一般特种车辆配件"},{code:"269902",desc:"电瓶车"},{code:"269904",desc:"电瓶车配件"},{code:"269906",desc:"人力车"},{code:"269908",desc:"人力车配件"},{code:"270102",desc:"手工刀"},{code:"270320",desc:"钳子"},{code:"270330",desc:"扳手"},{code:"270340",desc:"攻丝工具"},{code:"270358",desc:"成套手工工具"},{code:"270360",desc:"千斤顶"},{code:"270390",desc:"通用手工工具零配件"},{code:"270399",desc:"其他手工工具"},{code:"270502",desc:"农林手工工具"},{code:"270508",desc:"煤矿专用手工工具"},{code:"270702",desc:"防爆扳手"},{code:"270908",desc:"量尺"},{code:"270914",desc:"角度尺"},{code:"271102",desc:"钻头"},{code:"271516",desc:"气钻"},{code:"271518",desc:"气扳机"},{code:"271702",desc:"电动金属切削工具"},{code:"271704",desc:"电动砂磨工具"},{code:"271706",desc:"电动装配工具"},{code:"271714",desc:"建筑用电动工具"},{code:"271790",desc:"电动工具配件"},{code:"271799",desc:"其他电动工具"},{code:"271906",desc:"停送电工具"},{code:"271910",desc:"电工钳"},{code:"271999",desc:"其他电工工具"},{code:"272126",desc:"弹涂机"},{code:"272302",desc:"泥瓦工具"},{code:"272504",desc:"油壶"},{code:"272590",desc:"其他加油工具"},{code:"280104",desc:"冷藏冷冻电器"},{code:"280308",desc:"饮用水加工器具"},{code:"280316",desc:"洗碗(碟)机等食具清洁器具"},{code:"289910",desc:"音频输入、输出设备"},{code:"289912",desc:"音频输入、输出设备配件"},{code:"289924",desc:"电风扇"},{code:"290116",desc:"装订设备"},{code:"290124",desc:"办公机械耗材"},{code:"290302",desc:"计算机"},{code:"290306",desc:"输入设备"},{code:"290308",desc:"输出设备"},{code:"290506",desc:"应用系统"},{code:"290704",desc:"网络交换机、集线器"},{code:"290706",desc:"网络收发设备"},{code:"290720",desc:"网络线缆"},{code:"290799",desc:"计算机网络设备配件"},{code:"290902",desc:"各种摄影摄像器材"},{code:"300102",desc:"安全防护服"},{code:"300104",desc:"安全帽"},{code:"300108",desc:"防护手套"},{code:"300112",desc:"防护鞋、靴"},{code:"300116",desc:"呼吸防护用品"},{code:"300120",desc:"安全防护用具"},{code:"300199",desc:"其他安全防护用品"},{code:"300314",desc:"清洁卫生类用品"},{code:"300502",desc:"灭火器"},{code:"300510",desc:"消防水带"},{code:"300512",desc:"消防栓"},{code:"300518",desc:"消防辅助器材"},{code:"300522",desc:"消防系统及器材配件"},{code:"330306",desc:"桌面办公用品"},{code:"330506",desc:"复印、打印、传真纸"},{code:"330702",desc:"床"},{code:"330710",desc:"柜子"},{code:"330712",desc:"架子"},{code:"330718",desc:"门窗帘及附件"},{code:"330904",desc:"炊事用具"},{code:"331306",desc:"医用电子设备"},{code:"331504",desc:"篷布"},{code:"331506",desc:"车座套"},{code:"331702",desc:"各种实验室辅助器材"},{code:"331902",desc:"家居办公杂品"},{code:"331906",desc:"布类杂品"},{code:"331914",desc:"标志牌"},{code:"331999",desc:"其他类杂品"},{code:"333102",desc:"工具箱、包"}];const Q={阿里巴巴:{url:"https://p4psearch.1688.com/page.html?hpageId=old-sem-pc-list&keywords=",key:"阿里巴巴",id:"alibaba"},爱采购:{url:"https://b2b.baidu.com/s?q=",key:"爱采购",id:"aicaigou"},淘宝:{url:"https://s.taobao.com/search?q=",key:"淘宝",id:"taobao"},京东:{url:"https://search.jd.com/search?keyword=",key:"京东",id:"jingdong"}},Ec=()=>{const[t,o]=a.useState(""),[c,n]=a.useState(""),[s,d]=a.useState(Q.阿里巴巴),[i,m]=a.useState([]),h=r=>{if(n(r),o(r),s!=="历史价格"){let u=document.getElementById(s.id);u.src=u.src}},p=(r,u)=>({id:Rc(),date:Gt().subtract(u,"days").format("YYYY-MM-DD"),material:r,price:Fc(100,1e3)});a.useEffect(()=>{const u=[];for(let y=0;y<30;y++)u.push(p(t,y));m(u)},[t]);const l=()=>{const r=[];return Object.keys(Q).map((u,y)=>{r.push({label:e("div",{style:{fontSize:"1.2rem",padding:"0 1.2rem"},children:Q[u].key}),key:u,children:e("iframe",{className:"iframeStyle",id:Q[u].id,src:`${Q[u].url}${t}`})})}),r},k=r=>{d(Q[r]?Q[r]:r)};return b(N,{children:[t===""?e(Ue,{title:"常用搜索",extra:e(I.Search,{placeholder:"输入搜索关键词",allowClear:!0,enterButton:e(Oe,{}),size:"large",onSearch:h}),children:e(Le,{style:{borderTop:"1px solid #eee",borderLeft:"1px solid #eee"},children:$c.map((r,u)=>e(N,{children:u<32?e(de,{span:6,style:{borderRight:"1px solid #eee",borderBottom:"1px solid #eee",padding:"5px 15px"},children:e("span",{style:{cursor:"pointer"},onClick:()=>h(r.desc),children:r.desc})},r.code):null}))})}):null,e(Ue,{style:{width:"100%",height:"70vh",display:`${t===""?"none":"block"}`},children:e(Ie,{onChange:k,activeKey:s.key,type:"card",items:l(),tabBarGutter:10,tabBarExtraContent:e(I.Search,{placeholder:"输入搜索关键词",allowClear:!0,style:{width:600},enterButton:e(Oe,{}),size:"large",onSearch:h,value:c,onChange:r=>n(r.target.value)})})})]})},Uc=()=>{const{pathname:t}=ne();return e(Yt,{status:"404",title:"404",subTitle:`页面不存在, 当前路由: ${t}`,extra:e(S,{type:"primary",children:e(Ce,{to:"/",children:"返回首页"})})})};const Oc=a.forwardRef((t,o)=>{const c="MdEditorDraft",n=a.useRef(null),s=a.useRef(),{height:d=600,value:i="",onChange:m=G,contentType:h="markdown"}=t,{settings:{theme:p}}=a.useContext(K);a.useImperativeHandle(o,()=>({editor:s.current,container:n.current||void 0,getMarkdown:()=>{var r;return((r=s.current)==null?void 0:r.getMarkdown())||""},getHTML:()=>{var r;return((r=s.current)==null?void 0:r.getHTML())||""},clearDraft:()=>{localStorage.removeItem(c)},setMarkdown:r=>{var u;(u=s.current)==null||u.setMarkdown(r)}}),[s.current,n.current]),oe(()=>{console.log("is forucs",s.current.getSelection())},[i]);const l=()=>new Jt({initialValue:i,height:`${d}px`,initialEditType:"markdown",previewStyle:"vertical",plugins:[Wt],language:"zh-CN",previewHighlight:!0,frontMatter:!0,extendedAutolinks:!0,el:n.current,hideModeSwitch:!0,theme:p==="dark"?"dark":void 0}),k=So(r=>{var T,g;const y=h==="markdown"?((T=s.current)==null?void 0:T.getMarkdown())||"":((g=s.current)==null?void 0:g.getHTML())||"";m(y,r)},500);return a.useEffect(()=>{var y;s.current=l(),s.current.addHook("addImageBlobHook",(T,g,f)=>{const C=document.getElementById("toastuiAltTextInput"),x=(C==null?void 0:C.value)||"image",_=new FileReader;_.onload=U=>{var se;const A=(se=U.target)==null?void 0:se.result;console.log("Base64 encoded string:",A),g(A,x)},_.readAsDataURL(T)}),s.current.eventEmitter.listen("change",k);let r=setInterval(()=>{if(!s.current)return;const T=s.current.getMarkdown();localStorage.setItem(c,T),console.log("已保存到草稿箱!")},15*1e3);const u=localStorage.getItem(c);return u&&((y=s.current)==null||y.setMarkdown(u),console.log("已从草稿箱加载数据!")),()=>{r&&clearInterval(r)}},[]),oe(()=>{var u,y;const r=(u=s.current)==null?void 0:u.getMarkdown();(y=s.current)==null||y.destroy(),s.current=l(),s.current.setMarkdown(r||"")},[p]),oe(()=>{var r;(r=s.current)==null||r.setMarkdown(i)},[i]),e("div",{style:{backgroundColor:"#fff"},ref:n})}),ft=D.memo(Oc,(t,o)=>{var c,n;return((c=t.value)==null?void 0:c.length)!==((n=o.value)==null?void 0:n.length)||t.value!==o.value}),Bc=()=>{const[t]=v.useForm(),o=a.useRef(null),c=X(),n="articleDraft",{loading:s,run:d}=F(Eo,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{var l;(l=o.current)==null||l.clearDraft(),c("/article/list")},200)}),{data:i,loading:m}=F(Ae);a.useEffect(()=>{const l=B.getObject(n)||{},k={status:200,comment_control:[1,2],description:"",source:"",author:"Moto",sort_value:100};t.setFieldsValue({...k,...l})},[]);const h=async(l=!1)=>{var r;const k=await t.validateFields();k.content=((r=o.current)==null?void 0:r.getHTML())||"",k.is_draft=l?1:0,console.log("formData",k),d(k)},p=l=>(console.log("Upload event:",l),Array.isArray(l)?l:l&&l.fileList);return b(W,{children:[e(L.Title,{level:3,children:"发布文章"}),e(V,{}),b(v,{form:t,name:"createForm",labelCol:{span:2},children:[e(v.Item,{name:"title",label:"文章标题",rules:[{required:!0,message:"请输入标题"}],children:e(I,{})}),e(v.Item,{label:"封面",name:"cover",getValueFromEvent:p,valuePropName:"fileList",children:e(ct,{maxCount:1,listType:"picture-card",accept:"image/*",children:b("div",{children:[e(ye,{}),e("div",{style:{marginTop:8},children:"选择图片"})]})})}),e(v.Item,{label:"标签",name:"tags",children:e(_e,{mode:"tags",placeholder:"文章标签",style:{width:400}})}),e(v.Item,{label:"作者",name:"author",rules:[{required:!0,message:"请输入作者"}],children:e(I,{style:{width:200}})}),e(v.Item,{label:"简介",name:"description",children:e(I.TextArea,{rows:3})}),e(v.Item,{label:"内容",name:"markdown_content",children:e(ft,{ref:o})}),e(v.Item,{name:"category_id",label:"分类",rules:[{required:!0,message:"请选择分类!"}],children:e(be,{dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"请选择分类",fieldNames:{label:"name",value:"id"},allowClear:!0,treeDefaultExpandAll:!0,loading:m,treeData:i})}),e(v.Item,{name:"status",label:"状态",initialValue:200,children:b(P.Group,{children:[e(P,{value:200,children:"显示"}),e(P,{value:900,children:"不显示"})]})}),e(v.Item,{name:"comment_control",label:"评论控制",initialValue:[1,2],children:e(Pe.Group,{options:[{label:"显示评论",value:1},{label:"允许评论",value:2}]})}),e(v.Item,{label:"来源",name:"source",children:e(I,{style:{width:200}})}),e(v.Item,{label:"排序",name:"sort_value",children:e(I,{style:{width:200}})}),e(v.Item,{wrapperCol:{offset:3},children:b(E,{children:[e(S,{icon:e(nt,{}),onClick:()=>h(),loading:s,type:"primary",children:"发布文章"}),e(S,{icon:e(Ne,{}),loading:s,onClick:()=>h(!0),children:"保存为草稿"})]})})]})]})},Dc=()=>{const[t]=v.useForm(),o=a.useRef(null),c=X(),n=Qt();console.log("routeParams",n);const{loading:s,run:d}=F(Uo,{manual:!0,debounceWait:200,onSuccess:()=>setTimeout(()=>{var r;(r=o.current)==null||r.clearDraft(),c("/article/list")},200)}),{data:i,loading:m}=F(()=>$o({id:Number(n.id)}),{onSuccess:r=>{var C;const{content:u,comment_control:y,cover:T,...g}=r,f=[];[1,2].map(x=>y&x?f.push(x):void 0),g.markdown_content=u.markdown_content,t.setFieldsValue({...g,comment_control:f}),(C=o.current)==null||C.setMarkdown(u.markdown_content)}}),{data:h,loading:p}=F(Ae),l=async(r=!1)=>{var y;const u=await t.validateFields();u.content=((y=o.current)==null?void 0:y.getHTML())||"",u.is_draft=r?1:0,u.id=i.id,console.log("formData",u),d(u)},k=r=>(console.log("Upload event:",r),Array.isArray(r)?r:r&&r.fileList);return b(W,{children:[e(L.Title,{level:3,children:"发布文章"}),e(V,{}),b(v,{form:t,name:"createForm",labelCol:{span:2},children:[e(v.Item,{name:"title",label:"文章标题",rules:[{required:!0,message:"请输入标题"}],children:e(I,{})}),e(v.Item,{label:"封面",name:"cover",getValueFromEvent:k,valuePropName:"fileList",children:e(ct,{maxCount:1,listType:"picture-card",accept:"image/*",children:b("div",{children:[e(ye,{}),e("div",{style:{marginTop:8},children:"选择图片"})]})})}),e(v.Item,{label:"标签",name:"tags",children:e(_e,{mode:"tags",placeholder:"文章标签",style:{width:400}})}),e(v.Item,{label:"作者",name:"author",rules:[{required:!0,message:"请输入作者"}],children:e(I,{style:{width:200}})}),e(v.Item,{label:"简介",name:"description",children:e(I.TextArea,{rows:3})}),e(v.Item,{label:"内容",name:"markdown_content",children:e(ft,{ref:o})}),e(v.Item,{name:"category_id",label:"分类",rules:[{required:!0,message:"请选择分类!"}],children:e(be,{dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"请选择分类",fieldNames:{label:"name",value:"id"},allowClear:!0,treeDefaultExpandAll:!0,loading:p,treeData:h})}),e(v.Item,{name:"status",label:"状态",initialValue:200,children:b(P.Group,{children:[e(P,{value:200,children:"显示"}),e(P,{value:900,children:"不显示"})]})}),e(v.Item,{name:"comment_control",label:"评论控制",initialValue:[1,2],children:e(Pe.Group,{options:[{label:"显示评论",value:1},{label:"允许评论",value:2}]})}),e(v.Item,{label:"来源",name:"source",children:e(I,{style:{width:200}})}),e(v.Item,{label:"排序",name:"sort_value",children:e(I,{style:{width:200}})}),e(v.Item,{wrapperCol:{offset:3},children:b(E,{children:[e(S,{icon:e(nt,{}),onClick:()=>l(),loading:s,type:"primary",children:"更新"}),e(S,{icon:e(Ne,{}),loading:s,onClick:()=>l(!0),children:"保存为草稿"})]})})]})]})},Hc=()=>{const{data:t,loading:o,refresh:c}=F(Ae),[n]=v.useForm(),[s,d]=a.useState(),{loading:i,run:m}=F(Oo,{manual:!0,onSuccess:()=>c()}),{loading:h,run:p}=F(Bo,{manual:!0,onSuccess:()=>c()}),l=(u,y)=>{const T=y.node;d(T),n.setFieldsValue(T)},k=async()=>{const u=await n.validateFields();m(u)},r=async()=>{const u=await n.validateFields();p({...u,id:s.id})};return b(W,{children:[e(L.Title,{level:3,children:"分类管理"}),e(V,{}),e(Je,{spinning:o,tip:"正在加载分类数据, 请稍后...",children:b(Le,{gutter:24,children:[e(de,{span:8,children:e(Zt,{blockNode:!0,defaultExpandAll:!0,onSelect:l,fieldNames:{title:"name",key:"id",children:"children"},treeData:t})}),e(de,{span:16,children:b(v,{name:"categoryForm",form:n,labelCol:{span:4},initialValues:{sort_value:100},children:[e(v.Item,{label:"所属分类",name:"parent_id",rules:[{required:!0,message:"清选择所属分类"}],children:e(be,{fieldNames:{label:"name",value:"id"},treeData:[{name:"一级分类",id:0},...t||[]],dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"请选择所属分类",allowClear:!0})}),e(v.Item,{label:"分类名称",name:"name",rules:[{required:!0,message:"请输入分类名称"}],children:e(I,{style:{width:200},placeholder:"请输入分类名称"})}),e(v.Item,{label:"排序",name:"sort_value",children:e(I,{type:"number",style:{width:200}})}),e(v.Item,{name:"status",label:"状态",initialValue:200,children:b(P.Group,{children:[e(P,{value:200,children:"显示"}),e(P,{value:900,children:"不显示"})]})}),e(v.Item,{wrapperCol:{offset:3},children:b(E,{children:[e(S,{icon:e(Ne,{}),disabled:s===void 0,onClick:r,loading:h,type:"primary",children:"保存修改"}),e(S,{icon:e(ye,{}),loading:i,onClick:k,children:"添加为新分类"})]})})]})})]})})]})},zc=()=>{const{userInfo:t,setUserInfo:o}=a.useContext(J),c=n=>{o({...t,roles:[n]})};return b(W,{children:[b(L.Text,{children:["当前权限: ",JSON.stringify(t==null?void 0:t.roles)]}),e(V,{}),b(S.Group,{children:[e(S,{type:"primary",onClick:()=>c("admin"),children:"切换为 Admin"}),e(S,{onClick:()=>c("guest"),children:"切换为 Guest"})]})]})},qe=({children:t,role:o})=>{const{userInfo:c}=a.useContext(J);return dt(o,c)?e(N,{children:t}):null},Vc=()=>{const{userInfo:t,setUserInfo:o}=a.useContext(J),c=n=>{o({...t,roles:[n]})};return b(W,{children:[b(L.Text,{children:["当前权限: ",JSON.stringify(t==null?void 0:t.roles)]}),e(V,{}),b(S.Group,{children:[e(S,{type:"primary",onClick:()=>c("admin"),children:"切换为 Admin"}),e(S,{onClick:()=>c("guest"),children:"切换为 Guest"})]}),e(V,{}),b(E,{children:[e(qe,{role:"admin",children:e(S,{type:"primary",children:"Admin menu"})}),e(qe,{role:"guest",children:e(S,{children:"Guest menu"})})]})]})},jc=a.lazy(()=>ie(()=>import("./index-7ea56cea.js"),["assets/index-7ea56cea.js","assets/vendor-6a6a55f7.js","assets/vendor-79dc8b22.css"])),Ke=a.lazy(()=>ie(()=>import("./index-94dddeac.js"),["assets/index-94dddeac.js","assets/vendor-6a6a55f7.js","assets/vendor-79dc8b22.css"])),qc=a.lazy(()=>ie(()=>import("./index-0d33ed8e.js"),["assets/index-0d33ed8e.js","assets/vendor-6a6a55f7.js","assets/vendor-79dc8b22.css","assets/index-8728ff57.css"])),Kc=a.lazy(()=>ie(()=>import("./index-5181ff5d.js"),["assets/index-5181ff5d.js","assets/vendor-6a6a55f7.js","assets/vendor-79dc8b22.css","assets/index-19ead691.css"])),Gc=a.lazy(()=>ie(()=>import("./index-2e59cbd1.js"),["assets/index-2e59cbd1.js","assets/vendor-6a6a55f7.js","assets/vendor-79dc8b22.css","assets/index-c11d3a46.css"])),ee=({children:t})=>e(D.Suspense,{fallback:e(Re,{}),children:t});function Yc(){return[{path:"/login",element:e(ee,{children:e(qc,{})})},{path:"/",element:e(Ic,{}),children:[{path:"/",element:e(Co,{to:"/dashboard"})},{path:"/dashboard",element:e(ee,{children:e(Kc,{})})},{path:"/user",children:[{index:!0,element:e(je,{})},{path:"/user/center/index",element:e(je,{})},{path:"/user/center/update",element:e(wc,{})}]},{path:"/replica",children:[{path:"/replica/research",element:e(Ec,{})}]},{path:"/example",children:[{path:"/example/userList",element:e(Ac,{})},{path:"/example/tabs/manage",element:e(ee,{children:e(jc,{})})},{path:"/example/permission",children:[{path:"/example/permission/menu",element:e(zc,{})},{path:"/example/permission/button",element:e(Vc,{})}]}]},{path:"/article",children:[{index:!0,element:e(ee,{children:e(Ke,{})})},{path:"/article/list",element:e(ee,{children:e(Ke,{})})},{path:"/article/category",element:e(Hc,{})},{path:"/article/create",element:e(Bc,{})},{path:"/article/update/:id",element:e(Dc,{})}]},{path:"/blank",element:e(me,{})},{path:"/badge/dot",element:e(me,{title:"红点徽标"})},{path:"/badge/count",element:e(me,{title:"数字徽标"})},{path:z,element:e(ee,{children:e(Gc,{})})},{path:"/multilevel/menu/2/3",element:e(me,{title:"三级菜单"})},{path:"*",element:e(Uc,{})}]}]}const Jc=Xt(Yc(),{basename:"/my-react-tools/"});function Wc(){return a.useEffect(()=>{},[]),e(bo,{children:e(eo,{router:Jc})})}function Ge(t){const o=JSON.stringify({type:"JWT",alg:"HS256"}),c=Number((new Date().getTime()/1e3).toFixed(0)),n=JSON.stringify({iss:"https://github.com/MTABBJ",sub:"react-admin",iat:c,exp:c+86400*14,data:t}),s="H_97UyQUOmURnZdDwI0khuAt4Cmg";return`${Be(o)}.${Be(n)}.${s}`}M.mock(/api\/login/,"post",({body:t})=>{const{username:o,password:c}=JSON.parse(t);return o==="admin"?c!=="123456"?{code:-1,message:"密码错误"}:{code:0,message:"登录成功",data:{token:Ge({uid:1})}}:{code:0,message:"登录成功",data:{token:Ge({uid:$.Random.natural(2,1e4)})}}});M.setup({timeout:100});M.mock(/api\/user\/info/,"get",t=>({code:0,message:"ok",data:{id:1,username:"admin",nickname:"Moto",avatar:"./icon.svg",password:"",gender:$.Random.natural(1,2),email:"136xxxxxxxx@163.com",mobile:"136xxxxxxxx",roles:["admin"]}}));M.mock(/api\/user\/logout/,"post",t=>({code:0,message:"退出成功"}));M.mock(/api\/user\/list/,"get",t=>{const o=new URLSearchParams(t.url);let c=Number(o.has("pageSize")?o.get("pageSize"):10);const n={code:0,message:"ok",data:{total:100,[`list|${c}`]:[{"id|+1":c,username:"@first@last",nickname:"@cname",avatar:()=>$.Random.dataImage("200x200"),email:"@email",mobile:()=>M.mock(/^1[3456789]\d{9}$/).replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2"),"gender|1-2":0,create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return M.mock(n)});M.mock(/api\/user\/create/,"post",t=>({code:0,message:"创建成功",data:{id:$.Random.natural(100,9999)}}));M.mock(/api\/user\/update/,"post",t=>({code:0,message:"更新成功"}));M.mock(/api\/user\/delete/,"post",t=>({code:0,message:"删除成功"}));M.setup({timeout:100});M.mock(/api\/article\/detail/,"get",t=>(console.log("🚀 ~ file: article.ts:7 ~ Mock.mock ~ options:",t),{code:0,message:"ok",data:{id:1,title:"主题",description:"Moto",author:"Moto",tags:[1,2],content:{markdown_content:`# 内容标题\r
 正文`},sort_value:100,comment_control:3,create_time:$.Random.datetime()}}));M.mock(/api\/article\/list/,"get",t=>{const o=new URLSearchParams(t.url);let c=Number(o.has("pageSize")?o.get("pageSize"):10);const n={code:0,message:"ok",data:{total:100,[`list|${c}`]:[{"id|+1":c,author:"@first@last",title:()=>M.Random.ctitle(5,20),description:"@cname",cover:()=>$.Random.dataImage("480x270","封面"),content:"@email",create_time:"@date(yyyy-MM-dd HH:MM:ss)"}]}};return M.mock(n)});M.mock(/api\/article\/create/,"post",t=>({code:0,message:"创建成功",data:{id:$.Random.natural(100,9999)}}));M.mock(/api\/article\/update/,"post",t=>({code:0,message:"更新成功"}));M.mock(/api\/article\/delete/,"post",t=>({code:0,message:"删除成功"}));M.setup({timeout:100});M.mock(/api\/todo\/list/,"get",t=>{const o={code:0,message:"",data:{total:3,list:[{id:He(100,1e9),name:"全局搜索",status:re.incomplete,create_time:"2023-04-20",update_time:"2023-04-20"},{id:He(100,1e9),name:"多tab布局支持",status:re.completed,create_time:"2023-04-15",update_time:"2023-04-215"},{id:1,name:"这是一个todo例子",status:re.completed,create_time:"2023-04-10",update_time:"2023-04-10"}]}};return M.mock(o)});M.mock(/api\/todo\/create/,"post",t=>{const o=JSON.parse(t.body);return{code:0,message:"",data:{id:$.Random.natural(100,9999),name:o.name,status:re.incomplete,create_time:$.Random.now(),update_time:$.Random.now()}}});M.mock(/api\/todo\/update/,t=>({code:0,message:""}));M.mock(/api\/todo\/changeStatus/,"post",t=>({code:0,message:""}));M.mock(/api\/todo\/delete/,"post",t=>({code:0,message:""}));M.setup({timeout:100});M.mock(/api\/category\/treeList/,"get",t=>(console.log("🚀 ~ file: article.ts:7 ~ Mock.mock ~ options:",t),{code:0,message:"ok",data:[{id:82,name:"PHP",parent_id:0,sort_value:10,status:10,children:[{id:79,name:"Yii2.0",parent_id:82,sort_value:11,status:10},{id:95,name:"Yii1.1",parent_id:82,sort_value:12,status:10},{id:93,name:"函数",parent_id:82,sort_value:15,status:10}]},{id:84,name:"数据库",parent_id:0,sort_value:20,status:10,children:[{id:85,name:"mysql",parent_id:84,sort_value:21,status:10},{id:92,name:"redis",parent_id:84,sort_value:22,status:10}]},{id:86,name:"Linux",parent_id:0,sort_value:30,status:10},{id:81,name:"Javascript",parent_id:0,sort_value:40,status:10},{id:91,name:"Golang笔记",parent_id:0,sort_value:45,status:10},{id:100,name:"C语言",parent_id:0,sort_value:46,status:10},{id:94,name:"数据结构与算法",parent_id:0,sort_value:47,status:10,children:[{id:99,name:"算法",parent_id:94,sort_value:45,status:10},{id:96,name:"链表",parent_id:94,sort_value:47,status:10},{id:97,name:"hash",parent_id:94,sort_value:48,status:10},{id:98,name:"二叉树",parent_id:94,sort_value:49,status:10}]},{id:101,name:"正则表达式",parent_id:0,sort_value:48,status:10},{id:80,name:"资源分享",parent_id:0,sort_value:50,status:10,children:[{id:89,name:"软件教程",parent_id:80,sort_value:52,status:10},{id:90,name:"文章分享",parent_id:80,sort_value:53,status:10}]},{id:88,name:"其他",parent_id:0,sort_value:60,status:10}]}));M.mock(/api\/category\/create/,"post",t=>({code:0,message:"创建分类成功",data:{id:$.Random.natural(100,9999)}}));M.mock(/api\/category\/update/,"post",t=>({code:0,message:"更新分类成功"}));to.createRoot(document.getElementById("root")).render(e(Wc,{}));export{W as C,xo as D,N as F,ve as M,rc as R,K as S,re as T,e as a,Nc as b,j as c,B as d,Zc as e,sn as f,Xc as g,ce as h,on as i,b as j,nn as k,cn as l,tn as m,G as n,q as o,en as p,He as r,_c as u,ze as v};
